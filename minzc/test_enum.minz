// Test enum support - Z80-friendly error codes
// Enums are just u8 constants: 0, 1, 2, 3...

enum Result {
    Ok,           // 0
    FileNotFound, // 1  
    AccessDenied, // 2
    InvalidParam  // 3
}

enum Direction {
    North,  // 0
    East,   // 1
    South,  // 2
    West    // 3
}

// Z80-friendly error handling:
// - Carry flag set on error
// - Error code in A register
fun open_file(name: *u8) -> Result {
    // Simulate error
    return Result.FileNotFound
}

fun turn_right(dir: Direction) -> Direction {
    if dir == Direction.North {
        return Direction.East
    }
    if dir == Direction.East {
        return Direction.South
    }
    if dir == Direction.South {
        return Direction.West
    }
    return Direction.North
}

fun main() -> void {
    let result = open_file("test.txt")
    if result != Result.Ok {
        // Error! In Z80: carry flag set, A = error code
    }
    
    let dir = Direction.North
    let new_dir = turn_right(dir)
}