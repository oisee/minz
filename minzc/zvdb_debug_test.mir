; MinZ Intermediate Representation (MIR)
; Module: main

; Globals:
;   .Users.alice.dev.zvdb-minz.zvdb_debug_test.test_v1: .Users.alice.dev.zvdb-minz.zvdb_debug_test.TestVector
;   .Users.alice.dev.zvdb-minz.zvdb_debug_test.test_v2: .Users.alice.dev.zvdb-minz.zvdb_debug_test.TestVector

Function .Users.alice.dev.zvdb-minz.zvdb_debug_test.popcount_simple$u8(val: u8) -> u8
  @smc
  Locals:
    r2 = count: u8
    r4 = temp: u8
  Instructions:
      0: TRUE_SMC_LOAD ; Load from anchor val$imm0
      1: TEST
      2: jump_if_not r10, else_1
      3: jump end_if_2
      4: else_1:
      5: end_if_2:
      6: TEST
      7: jump_if_not r21, else_3
      8: jump end_if_4
      9: else_3:
     10: end_if_4:
     11: TEST
     12: jump_if_not r32, else_5
     13: jump end_if_6
     14: else_5:
     15: end_if_6:
     16: TEST
     17: jump_if_not r43, else_7
     18: jump end_if_8
     19: else_7:
     20: end_if_8:
     21: TEST
     22: jump_if_not r54, else_9
     23: jump end_if_10
     24: else_9:
     25: end_if_10:
     26: TEST
     27: jump_if_not r65, else_11
     28: jump end_if_12
     29: else_11:
     30: end_if_12:
     31: TEST
     32: jump_if_not r76, else_13
     33: jump end_if_14
     34: else_13:
     35: end_if_14:
     36: TEST
     37: jump_if_not r87, else_15
     38: jump end_if_16
     39: else_15:
     40: end_if_16:
     41: r91 = load count
     42: return r91

Function .Users.alice.dev.zvdb-minz.zvdb_debug_test.hamming_test$TestVector$TestVector(v1: .Users.alice.dev.zvdb-minz.zvdb_debug_test.TestVector, v2: .Users.alice.dev.zvdb-minz.zvdb_debug_test.TestVector) -> u8
  @smc
  Locals:
    r3 = dist: u8
    r9 = xor_val: u8
    r19 = bits: u8
  Instructions:
      0: r6 = 8
      1: r7 = r5 ; Initialize loop variable i
      2: for_loop_17:
      3: r8 = r7 < r6 ; Check i < end
      4: jump_if_not r8, for_end_18
      5: TRUE_SMC_LOAD ; Load from anchor v1$imm0
      6: LOAD_INDEX ; Load array element (u8)
      7: TRUE_SMC_LOAD ; Load from anchor v2$imm0
      8: LOAD_INDEX ; Load array element (u8)
      9: r22 = call .Users.alice.dev.zvdb-minz.zvdb_debug_test.popcount_simple$u8
     10: r7 = r7 + r26 ; Increment i
     11: r26 = 1
     12: jump for_loop_17
     13: for_end_18:
     14: r27 = load dist
     15: return r27

Function .Users.alice.dev.zvdb-minz.zvdb_debug_test.main() -> void
  @smc
  Locals:
    r17 = distance: u8
  Instructions:
      0: LOAD_STRING
      1: PRINT_STRING ; Print "ZVDB TAS Debug Test
" (20 chars via loop)
      2: r3 = 8
      3: r4 = r2 ; Initialize loop variable i
      4: for_loop_19:
      5: r5 = r4 < r3 ; Check i < end
      6: jump_if_not r5, for_end_20
      7: STORE_PTR ; Store to array[index] (u8)
      8: STORE_PTR ; Store to array[index] (u8)
      9: INC
     10: jump for_loop_19
     11: for_end_20:
     12: r22 = call .Users.alice.dev.zvdb-minz.zvdb_debug_test.hamming_test$TestVector$TestVector
     13: LOAD_STRING
     14: PRINT_STRING ; Print "Hamming distance: " (18 chars via loop)
     15: PRINT_STRING_DIRECT ; Direct print "
" (1 chars)
     16: LOAD_STRING
     17: PRINT_STRING ; Print "TAS Test Complete!
" (19 chars via loop)
     18: return

