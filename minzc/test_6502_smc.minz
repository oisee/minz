// Test 6502 zero-page SMC optimization
fun add_smc(a: u8, b: u8) -> u8 {
    return a + b;
}

fun loop_test(count: u8) -> u8 {
    let sum: u8 = 0;
    let i: u8 = 0;
    
    while (i < count) {
        sum = add_smc(sum, i);
        i = i + 1;
    }
    
    return sum;
}

fun main() -> void {
    let result: u8 = loop_test(10);
    // Result should be 0+1+2+3+4+5+6+7+8+9 = 45
}