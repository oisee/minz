// Working @minz[[[]]] metaprogramming demo

// Generate a lookup table  
@minz[[[
for i in 0..5 {
    @emit("const SQUARE_{i}: u8 = {i * i};");
}
]]]

// Generate simple functions
@minz[[[
for n in 1..4 {
    @emit("fun double_{n}(x: u8) -> u8 { x * {n + n} }");
}
]]]

fun main() -> u8 {
    // Use generated constants - should compute 0² + 1² + 2² = 5
    SQUARE_0 + SQUARE_1 + SQUARE_2
}