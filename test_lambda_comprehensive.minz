// Test comprehensive lambda functionality

fun test_basic_lambda() -> u8 {
    let add = |x: u8, y: u8| => u8 { x + y };
    add(5, 3)  // Should return 8
}

fun test_lambda_reference() -> u8 {
    let double = |x: u8| => u8 { x * 2 };
    let f = double;  // Function reference copy
    f(10)  // Should return 20
}

fun main() -> u8 {
    let a = test_basic_lambda();      // 8
    let b = test_lambda_reference();  // 20
    a + b  // Should return 28
}