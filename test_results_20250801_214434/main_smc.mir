; MinZ Intermediate Representation (MIR)
; Module: main

Function .Users.alice.dev.minz-ts.examples.main.main() -> void
  @smc
  Locals:
    r4 = x: u8
    r6 = y: u8
    r8 = counter: u16
  Instructions:
      0: r1 = call clear_screen
      1: r3 = call set_border
      2: r5 = 10
      3: store , r5
      4: r7 = 10
      5: store , r7
      6: r9 = 0
      7: store , r9
      8: loop_1:
      9: r10 = load counter
     10: r11 = 1000
     11: r12 = r10 < r11
     12: jump_if_not r12, end_loop_2
     13: r13 = load x
     14: r14 = 1
     15: r15 = r13 + r14
     16: store x, r15
     17: r16 = load x
     18: r17 = 20
     19: r18 = r16 > r17
     20: jump_if_not r18, else_3
     21: r19 = 10
     22: store x, r19
     23: r20 = load y
     24: r21 = 1
     25: r22 = r20 + r21
     26: store y, r22
     27: r23 = load y
     28: r24 = 20
     29: r25 = r23 > r24
     30: jump_if_not r25, else_5
     31: r26 = 10
     32: store y, r26
     33: jump end_if_6
     34: else_5:
     35: end_if_6:
     36: jump end_if_4
     37: else_3:
     38: end_if_4:
     39: r29 = call draw_pixel
     40: r31 = call delay
     41: r32 = load counter
     42: r33 = 1
     43: r34 = r32 + r33
     44: store counter, r34
     45: jump loop_1
     46: end_loop_2:
     47: return

Function .Users.alice.dev.minz-ts.examples.main.clear_screen() -> void
  @smc
  Locals:
    r1 = addr: u16
  Instructions:
      0: r2 = 16384
      1: store , r2
      2: loop_7:
      3: r3 = load addr
      4: r6 = 22528 ; Folded: 
      5: r7 = r3 < r6
      6: jump_if_not r7, end_loop_8
      7: r8 = load addr
      8: r9 = 1
      9: r10 = r8 + r9
     10: store addr, r10
     11: jump loop_7
     12: end_loop_8:
     13: return

Function .Users.alice.dev.minz-ts.examples.main.set_border(color: u8) -> void
  @smc
  Instructions:
      0: return

Function .Users.alice.dev.minz-ts.examples.main.draw_pixel(x: u8, y: u8) -> void
  @smc
  Locals:
    r3 = addr: u16
  Instructions:
      0: r4 = 16384
      1: UNKNOWN_OP_31 ; Load from anchor y$imm0
      2: r6 = 32
      3: r7 = r5 * r6
      4: r8 = r4 + r7
      5: UNKNOWN_OP_31 ; Load from anchor x$imm0
      6: r10 = r8 + r9
      7: store , r10
      8: return

Function .Users.alice.dev.minz-ts.examples.main.delay(count: u16) -> void
  @smc
  Locals:
    r2 = i: u16
  Instructions:
      0: r3 = 0
      1: store , r3
      2: loop_9:
      3: r4 = load i
      4: UNKNOWN_OP_31 ; Load from anchor count$imm0
      5: r6 = r4 < r5
      6: jump_if_not r6, end_loop_10
      7: r7 = load i
      8: r8 = 1
      9: r9 = r7 + r8
     10: store i, r9
     11: jump loop_9
     12: end_loop_10:
     13: return

