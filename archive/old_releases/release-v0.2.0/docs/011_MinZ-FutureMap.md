–î–∞ ‚Äî –Ω–µ—Å–∫–æ–ª—å–∫–æ –≤–∞–∂–Ω—ã—Ö –≤–µ—â–µ–π –∏–∑ –Ω–∞—à–µ–π –±–µ—Å–µ–¥—ã –µ—â—ë –Ω–µ —Ñ–æ—Ä–º–∞–ª–∏–∑–æ–≤–∞–Ω—ã –≤ —Ç–µ–∫—É—â–∏—Ö —Ñ–∞–π–ª–∞—Ö. –ù–∏–∂–µ —Å–ø–∏—Å–æ–∫ –ø—Ä–æ–±–µ–ª–æ–≤ –∏ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–π, –∫–∞–∫ –∏—Ö –∑–∞–∫—Ä—ã—Ç—å (—Å —Å—Å—ã–ª–∫–∞–º–∏ –Ω–∞ —Ä–∞–∑–¥–µ–ª—ã, –∫—É–¥–∞ –ª–æ–≥–∏—á–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å).

‚∏ª

–ß—Ç–æ —É–ø—É—â–µ–Ω–æ / —Å—Ç–æ–∏—Ç –¥–æ—Ñ–æ—Ä–º–∞–ª–∏–∑–æ–≤–∞—Ç—å
	1.	–£–∫–∞–∑–∞—Ç–µ–ª–∏ –Ω–∞ —Ñ—É–Ω–∫—Ü–∏–∏ –∏ –≤—ã–∑–æ–≤—ã —á–µ—Ä–µ–∑ –Ω–∏—Ö

	‚Ä¢	–ß—Ç–æ –µ—Å—Ç—å –≤ –±–µ—Å–µ–¥–µ: –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏–µ fun-–ø–æ–π–Ω—Ç–µ—Ä–∞ –∫–∞–∫ –∞–¥—Ä–µ—Å–∞, –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ sig-id; –≤—ã–∑–æ–≤ –ø–æ–¥ @abi(smc)/@abi(slot); –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å ¬´—á–∞—Å—Ç–∏—á–Ω–æ–≥–æ —Å–≤—è–∑—ã–≤–∞–Ω–∏—è¬ª (smc_bind) –∫–∞–∫ SMC-–∑–∞–º—ã–∫–∞–Ω–∏—è.
	‚Ä¢	–í SPEC/ADR —Å–µ–π—á–∞—Å: –∫—Ä–∞—Ç–∫–æ —É–ø–æ–º—è–Ω—É—Ç–∞ smc_bind (–≤ ADR –∫–∞–∫ –æ–ø—Ü–∏–æ–Ω–∞–ª), –Ω–æ –Ω–µ—Ç –Ω–æ—Ä–º–∞—Ç–∏–≤–∞ –ø–æ:
	‚Ä¢	–±–∏–Ω–∞—Ä–Ω–æ–º—É —Ñ–æ—Ä–º–∞—Ç—É fun-–ø–æ–π–Ω—Ç–µ—Ä–∞ (–º–∏–Ω–∏–º—É–º: u16 addr; –æ–ø—Ü–∏–∏: u16 sig_id, u16 anchor_base),
	‚Ä¢	–ø—Ä–∞–≤–∏–ª–∞–º –≤—ã–∑–æ–≤–∞ —á–µ—Ä–µ–∑ —É–∫–∞–∑–∞—Ç–µ–ª—å –¥–ª—è @abi(smc) (–ø–∞—Ç—á —è–∫–æ—Ä–µ–π —Ü–µ–ª–µ–≤–æ–π —Ñ—É–Ω–∫—Ü–∏–∏ –ø–æ PATCH-TABLE) –∏ @abi(slot),
	‚Ä¢	—Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏ —Ç–∏–ø–æ–≤ (–ºismatch ‚Üí –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞/–∑–∞–ø—Ä–µ—Ç),
	‚Ä¢	–≤–æ–∑–º–æ–∂–Ω—ã–º thunk-–æ–±—ë—Ä—Ç–∫–∞–º –¥–ª—è —Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω–∏—è ABI.
	‚Ä¢	–ü—Ä–µ–¥–ª–∞–≥–∞—é: –¥–æ–±–∞–≤–∏—Ç—å –≤ SPEC –æ—Ç–¥–µ–ª—å–Ω—ã–π —Ä–∞–∑–¥–µ–ª ‚ÄúFunction Pointers & Calls‚Äù (MUST/SHOULD), –∞ –≤ ADR ‚Äî –ø–æ–¥–ø—É–Ω–∫—Ç ¬´–ø–æ–¥—Ä–æ–±–Ω–æ—Å—Ç–∏¬ª.

	2.	–§–æ—Ä–º–∞–ª—å–Ω–∞—è —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏—è smc_bind (—á–∞—Å—Ç–∏—á–Ω–æ–µ —Å–≤—è–∑—ã–≤–∞–Ω–∏–µ)

	‚Ä¢	–ß—Ç–æ –µ—Å—Ç—å –≤ –±–µ—Å–µ–¥–µ: –∑–∞–º—ã–∫–∞–Ω–∏–µ-—Ç—Ä–∞–Ω–∫ —Å –∑–∞—à–∏—Ç—ã–º–∏ –∫–æ–Ω—Å—Ç–∞–Ω—Ç–∞–º–∏; –ø–æ—Å–ª–µ–¥—É—é—â–∏–µ –∞—Ä–≥—É–º–µ–Ω—Ç—ã –ø–∞—Ç—á–∞—Ç—Å—è; —ç–∫–æ–Ω–æ–º–∏—è –ø–∞—Ç—á–µ–π.
	‚Ä¢	–í SPEC/ADR: —É–ø–æ–º—è–Ω—É—Ç–æ –≤—Å–∫–æ–ª—å–∑—å, –±–µ–∑ –Ω–æ—Ä–º–∞—Ç–∏–≤–∞.
	‚Ä¢	–ü—Ä–µ–¥–ª–∞–≥–∞—é: –≤ SPEC –≤–≤–µ—Å—Ç–∏:
	‚Ä¢	—Å–∏–Ω—Ç–∞–∫—Å–∏—Å (smc_bind f(arg=const, ...) -> closure),
	‚Ä¢	—á—Ç–æ –∏–º–µ–Ω–Ω–æ –∑–∞—à–∏–≤–∞–µ—Ç—Å—è (—Å–ø–∏—Å–æ–∫ —è–∫–æ—Ä–µ–π –∏ –∏—Ö –∑–Ω–∞—á–µ–Ω–∏—è),
	‚Ä¢	–∫–∞–∫ –≤—ã–≥–ª—è–¥–∏—Ç –≤—ã–∑–æ–≤ (–ø–∞—Ç—á —Ç–æ–ª—å–∫–æ –Ω–µ–∑–∞—à–∏—Ç—ã—Ö —è–∫–æ—Ä–µ–π),
	‚Ä¢	–æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è –¥–ª—è —Ä–µ–∫—É—Ä—Å–∏–∏/ISR (–º–æ–∂–µ—Ç —Ç—Ä–µ–±–æ–≤–∞—Ç—å—Å—è SMC-undo –∏–ª–∏ –ø–µ—Ä-–∫–æ–Ω—Ç–µ–∫—Å—Ç–Ω—ã–µ –∫–æ–ø–∏–∏).

	3.	–í—ã–∑–æ–≤ –ø–æ—Ç–æ–º–∫–æ–≤ (–ø–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –∑–Ω–∞—á–µ–Ω–∏–π —á–µ—Ä–µ–∑ —è–∫–æ—Ä—è —Ä–æ–¥–∏—Ç–µ–ª—è)

	‚Ä¢	–ß—Ç–æ –µ—Å—Ç—å –≤ –±–µ—Å–µ–¥–µ: ¬´—á–∏—Ç–∞–µ–º –∏–∑ parent_p$imm0 ‚Üí –ø–∞—Ç—á–∏–º child_q$imm0¬ª.
	‚Ä¢	–í SPEC/ADR: –Ω–µ –∑–∞—Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–æ —è–≤–Ω–æ –∫–∞–∫ –ø—Ä–∞–≤–∏–ª–æ.
	‚Ä¢	–ü—Ä–µ–¥–ª–∞–≥–∞—é: –≤ SPEC ¬ßSMC Anchors –¥–æ–±–∞–≤–∏—Ç—å MUST/SHOULD-–ø—Ä–∞–≤–∏–ª–∞ ¬´Propagation¬ª: –ø—Ä–∏ –ø–µ—Ä–µ–¥–∞—á–µ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ –≤–Ω–∏–∑ –º–æ–∂–Ω–æ (–∏ –∂–µ–ª–∞—Ç–µ–ª—å–Ω–æ) –ø–∞—Ç—á–∏—Ç—å —è–∫–æ—Ä—è —Ñ—É–Ω–∫—Ü–∏–∏-–ø–æ—Ç–æ–º–∫–∞ –Ω–∞–ø—Ä—è–º—É—é –∏–∑ –∞–¥—Ä–µ—Å–æ–≤ —è–∫–æ—Ä–µ–π —Ä–æ–¥–∏—Ç–µ–ª—è, –±–µ–∑ –ø—Ä–æ–º–µ–∂—É—Ç–æ—á–Ω—ã—Ö —Å–ª–æ—Ç–æ–≤/—Ä–µ–≥–∏—Å—Ç—Ä–æ–≤ (—Å DI/EI –¥–ª—è imm16).

	4.	–ú–µ—Ç–∞–ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏–µ: —Ñ–∞–∑–∞ Lua ‚Üí MinZ-native

	‚Ä¢	–ß—Ç–æ –µ—Å—Ç—å –≤ –±–µ—Å–µ–¥–µ: –ø–ª–∞–Ω –ø–æ—Å—Ç–µ–ø–µ–Ω–Ω–æ–π –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ (Lua-—Ö—É–∫–∏ –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ —Ç—Ä–∞–Ω–∫–æ–≤/—Ç–∞–±–ª–∏—Ü/—á–∞—Å—Ç–∏—á–Ω—ã—Ö —Å–ø–µ—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–π; –¥–∞–ª–µ–µ meta fun/const eval).
	‚Ä¢	–í SPEC/ADR: –Ω–µ—Ç –¥–æ—Ä–æ–∂–Ω–æ–π –∫–∞—Ä—Ç—ã –∏ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–æ–≤ (–∫–∞–∫–∏–µ —Ö—É–∫–∏, –∫–∞–∫–∏–µ –∞—Ä—Ç–µ—Ñ–∞–∫—Ç—ã).
	‚Ä¢	–ü—Ä–µ–¥–ª–∞–≥–∞—é:
	‚Ä¢	–≤ ADR ‚Äî ¬´–°—Ç—Ä–∞—Ç–µ–≥–∏—è –º–µ—Ç–∞–ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏—è¬ª (Design intent),
	‚Ä¢	–≤ SPEC ‚Äî ¬´Compiler Hooks (experimental)¬ª: —Å–ø–∏—Å–æ–∫ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã—Ö —Ç–æ—á–µ–∫ –∏ —Ñ–æ—Ä–º–∞—Ç –≤—Ö–æ–¥–æ–≤/–≤—ã—Ö–æ–¥–æ–≤.

	5.	–ú–æ–¥–µ–ª—å –∫–æ–Ω–∫—É—Ä–µ–Ω—Ç–Ω–æ—Å—Ç–∏ (goroutine-–ª–∞–π—Ç)

	‚Ä¢	–ß—Ç–æ –µ—Å—Ç—å –≤ –±–µ—Å–µ–¥–µ: spawn, yield, –∫–∞–Ω–∞–ª—ã/–ø–æ—á—Ç–æ–≤—ã–µ —è—â–∏–∫–∏ (–±–µ–∑ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏—è —Å—Ç–µ–∫–∞; state-machine), ISR-—Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å.
	‚Ä¢	–í SPEC/ADR: –Ω–µ –æ—Ç—Ä–∞–∂–µ–Ω–æ.
	‚Ä¢	–ü—Ä–µ–¥–ª–∞–≥–∞—é:
	‚Ä¢	–≤ ADR ‚Äî —Ä–∞–∑–¥–µ–ª ¬´–ö–æ–Ω–∫—É—Ä–µ–Ω—Ç–Ω–æ—Å—Ç—å: –¥–∏–∑–∞–π–Ω –∏ –≥—Ä–∞–Ω–∏—Ü—ã¬ª,
	‚Ä¢	–≤ SPEC ‚Äî ¬´Concurrency (experimental)¬ª: –º–∏–Ω–∏–º–∞–ª—å–Ω—ã–π –Ω–æ—Ä–º–∞—Ç–∏–≤ –¥–ª—è spawn/yield (MUST: –∫–æ–æ–ø–µ—Ä–∞—Ç–∏–≤–Ω–æ—Å—Ç—å, —Ä–∞–∑–º–µ—â–µ–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è, –∑–∞–ø—Ä–µ—Ç –±–ª–æ–∫–∏—Ä—É—é—â–∏—Ö SMC-–ø–∞—Ç—á–µ–π –≤ —á—É–∂–æ–º –∫–æ–Ω—Ç–µ–∫—Å—Ç–µ –∏ —Ç. –ø.).

	6.	–≠—Ä–≥–æ–Ω–æ–º–∏–∫–∞ —è–∑—ã–∫–∞ –≤ –¥—É—Ö–µ Crystal/Elixir/Ruby/Go

	‚Ä¢	–ß—Ç–æ –µ—Å—Ç—å –≤ –±–µ—Å–µ–¥–µ: –∏–º–µ–Ω–æ–≤–∞–Ω–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã, match, –≤—ã—Ä–∞–∂–µ–Ω–∏—è-–∑–Ω–∞—á–µ–Ω–∏—è, –∫–æ—Ä—Ç–µ–∂–∏ –æ—à–∏–±–æ–∫ {:ok,v}/{:error,e}, –∏—Ç–µ—Ä–∞—Ç–æ—Ä—ã —Å —Å–∞—Ö–∞—Ä–æ–º.
	‚Ä¢	–í SPEC/ADR: –µ—Å—Ç—å match, –∏—Ç–µ—Ä–∞—Ç–æ—Ä—ã, –Ω–æ –Ω–µ—Ç:
	‚Ä¢	–Ω–æ—Ä–º–∞—Ç–∏–≤–∞ –ø–æ –∏–º–µ–Ω–æ–≤–∞–Ω–Ω—ã–º –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º,
	‚Ä¢	–Ω–æ—Ä–º–∞—Ç–∏–≤–∞ –ø–æ –∫–æ—Ä—Ç–µ–∂–∞–º –æ—à–∏–±–æ–∫ (ABI: –≤ –∫–∞–∫–æ–π —Ä–µ–≥–∏—Å—Ç—Ä/—Å–ª–æ—Ç –∫–ª–∞–¥—ë—Ç—Å—è —Ç–µ–≥/–∑–Ω–∞—á–µ–Ω–∏–µ),
	‚Ä¢	—Å—Ç–∞—Ç—É—Å–∞ ¬´expression-oriented¬ª (—á—Ç–æ –∏–º–µ–Ω–Ω–æ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –±–ª–æ–∫/if/match).
	‚Ä¢	–ü—Ä–µ–¥–ª–∞–≥–∞—é: –≤ SPEC –¥–æ–±–∞–≤–∏—Ç—å –∫—Ä–∞—Ç–∫–∏–π ¬´Language Ergonomics¬ª (MUST/SHOULD), –∞ –≤ ADR ‚Äî –º–æ—Ç–∏–≤–∞—Ü–∏—é.

	7.	–î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞/—Ñ–ª–∞–≥–∏ –∫–æ–º–ø–∏–ª—è—Ç–æ—Ä–∞ (–Ω–µ–ø–æ–ª–Ω–æ)

	‚Ä¢	–ß—Ç–æ –µ—Å—Ç—å –≤ –±–µ—Å–µ–¥–µ: -report-abi, –æ—Ç—á—ë—Ç—ã –ø–æ SMC-—è–∫–æ—Ä—è–º/undo-log/–∫–∞–¥—Ä–∞–º, –ø–æ—Ä–æ–≥–∏ –æ–∫—É–ø–∞–µ–º–æ—Å—Ç–∏.
	‚Ä¢	–í SPEC: –µ—Å—Ç—å —á–∞—Å—Ç—å —Ñ–ª–∞–≥–æ–≤ (-report-smc-anchors, -fsmc-snapshot, -abi‚Ä¶), –Ω–µ—Ç -report-abi –∏ –æ—Ç—á—ë—Ç–Ω—ã—Ö —Ñ–æ—Ä–º–∞—Ç–æ–≤ (–º–∏–Ω–∏–º–∞–ª—å–Ω—ã–π schema).
	‚Ä¢	–ü—Ä–µ–¥–ª–∞–≥–∞—é:
	‚Ä¢	–¥–æ–±–∞–≤–∏—Ç—å -report-abi,
	‚Ä¢	–æ–ø–∏—Å–∞—Ç—å –ø–æ–ª—è JSON –¥–ª—è PATCH-TABLE, MEMORY-MAP, FRAME-MAP, –∏ –æ—Ç—á—ë—Ç–∞ –∞–±–∏-—Ä–µ—à–µ–Ω–∏–π (–Ω–∞ —É—Ä–æ–≤–µ–Ω—å ¬´draft schema¬ª).

	8.	–ü—Ä–∏–º–µ—Ä—ã —Å –≤–µ—Ç–≤–ª–µ–Ω–∏—è–º–∏ –∏ ¬´—Å–∏–Ω—Ç–µ—Ç–∏—á–µ—Å–∫–∏–º —è–∫–æ—Ä–µ–º¬ª

	‚Ä¢	–ß—Ç–æ –µ—Å—Ç—å –≤ –±–µ—Å–µ–¥–µ: —É–ø–æ–º–∏–Ω–∞–ª–∏ case, –∫–æ–≥–¥–∞ –Ω–µ—Ç –µ–¥–∏–Ω–æ–π –¥–æ–º–∏–Ω–∞—Ü–∏–∏.
	‚Ä¢	–í SPEC/ADR: –Ω–µ—Ç –¥–µ–º–æ-–ª–∏—Å—Ç–∏–Ω–≥–∞ —Ç–∞–∫–æ–≥–æ —Å–ª—É—á–∞—è.
	‚Ä¢	–ü—Ä–µ–¥–ª–∞–≥–∞—é: –¥–æ–±–∞–≤–∏—Ç—å –Ω–µ–±–æ–ª—å—à–æ–π –ø—Ä–∏–º–µ—Ä (–∏—Å—Ö–æ–¥–Ω–∏–∫ + –∞–Ω–Ω–æ—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–π ASM), –≥–¥–µ –≤–∏–¥–Ω–æ –æ–±—â–∏–π —è–∫–æ—Ä—å –ø–µ—Ä–µ–¥ if/else.

	9.	–¢–∞–±–ª–∏—Ü–∞ T-states ‚Äî —Ä–∞—Å—à–∏—Ä–µ–Ω–Ω–∞—è

	‚Ä¢	–ß—Ç–æ –µ—Å—Ç—å –≤ ADR: —Ç–æ–ª—å–∫–æ —Å—Ä–∞–≤–Ω–µ–Ω–∏–µ LD A,n vs LD A,(nn) –∏ —ç–≤—Ä–∏—Å—Ç–∏–∫–∞ –æ–∫—É–ø–∞–µ–º–æ—Å—Ç–∏.
	‚Ä¢	–ü—Ä–µ–¥–ª–∞–≥–∞—é: –¥–æ–±–∞–≤–∏—Ç—å –º–∏–Ω–∏-—Ç–∞–±–ª–∏—Ü—É —á–∞—Å—Ç—ã—Ö –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–π (LD HL,nn, LD (nn),A, JP nn, DJNZ, CP n, ADD A,n) ‚Äî —É–¥–æ–±–Ω–æ –¥–ª—è —á–∏—Ç–∞—Ç–µ–ª—è.

	10.	smc_guard / API –¥–ª—è SMC-undo

	‚Ä¢	–ß—Ç–æ –µ—Å—Ç—å –≤ –±–µ—Å–µ–¥–µ: –∏–¥–µ—è –±–ª–æ–∫–∞ smc_guard { ... } –∫–∞–∫ —É–¥–æ–±–Ω–æ–≥–æ —Å–∫–æ—É–ø–∞ –¥–ª—è –∞–≤—Ç–æ-—Å–Ω–∞–ø—à–æ—Ç–∞ –ø–∞—Ç—á–µ–π.
	‚Ä¢	–í SPEC/ADR: –Ω–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–æ.
	‚Ä¢	–ü—Ä–µ–¥–ª–∞–≥–∞—é: –¥–æ–±–∞–≤–∏—Ç—å –≤ SPEC ¬´SMC Guard (optional)¬ª: —Å–∏–Ω—Ç–∞–∫—Å–∏—Å –∏ –≥–∞—Ä–∞–Ω—Ç–∏—é, —á—Ç–æ –≤—Å–µ –ø–∞—Ç—á–∏ –≤–Ω—É—Ç—Ä–∏ –±–ª–æ–∫–∞ –±—É–¥—É—Ç –æ—Ç–∫–∞—Ç–∞–Ω—ã –ø—Ä–∏ –≤—ã—Ö–æ–¥–µ.

‚∏ª

–ö—É–¥–∞ —ç—Ç–æ –ø–æ–ª–æ–∂–∏—Ç—å
	‚Ä¢	SPEC.md
	‚Ä¢	¬ß ‚ÄúFunction Pointers & Calls‚Äù ‚Äî —Ñ–æ—Ä–º–∞—Ç fun-pointer, –≤—ã–∑–æ–≤—ã –ø–æ–¥ —Ä–∞–∑–Ω—ã–º–∏ ABI, thunk-—Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å.
	‚Ä¢	¬ß ‚ÄúSMC Bind (Partial Specialization)‚Äù ‚Äî —Å–∏–Ω—Ç–∞–∫—Å–∏—Å, –ø–æ–≤–µ–¥–µ–Ω–∏–µ, –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è.
	‚Ä¢	¬ß ‚ÄúPropagation to Callees‚Äù ‚Äî –ø—Ä–∞–≤–∏–ª–æ –ø–∞—Ç—á–∞ —è–∫–æ—Ä–µ–π –ø–æ—Ç–æ–º–∫–æ–≤ –∏–∑ –∞–¥—Ä–µ—Å–æ–≤ —è–∫–æ—Ä–µ–π —Ä–æ–¥–∏—Ç–µ–ª—è.
	‚Ä¢	¬ß ‚ÄúMetaprogramming Hooks (experimental)‚Äù ‚Äî Lua-—Ñ–∞–∑–∞.
	‚Ä¢	¬ß ‚ÄúConcurrency (experimental)‚Äù ‚Äî –º–∏–Ω–∏–º–∞–ª—å–Ω—ã–µ –ø—Ä–∞–≤–∏–ª–∞ spawn/yield.
	‚Ä¢	¬ß ‚ÄúLanguage Ergonomics‚Äù ‚Äî –∏–º–µ–Ω–æ–≤–∞–Ω–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã, error tuples ABI (–∫—Ä–∞—Ç–∫–æ).
	‚Ä¢	¬ß ‚ÄúCompiler Reports & Schemas‚Äù ‚Äî -report-abi –∏ draft JSON —Å—Ö–µ–º—ã.
	‚Ä¢	¬ß ‚ÄúSMC Guard‚Äù ‚Äî –±–ª–æ–∫–æ–≤–∞—è –∫–æ–Ω—Å—Ç—Ä—É–∫—Ü–∏—è (optional).
	‚Ä¢	–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ: —Ä–∞—Å—à–∏—Ä–µ–Ω–Ω–∞—è T-state —Ç–∞–±–ª–∏—Ü–∞, –ø—Ä–∏–º–µ—Ä ¬´—Å–∏–Ω—Ç–µ—Ç–∏—á–µ—Å–∫–æ–≥–æ —è–∫–æ—Ä—è¬ª.
	‚Ä¢	ADR_001.md
	‚Ä¢	–î–æ–±–∞–≤–∏—Ç—å –ø–æ–¥—Ä–∞–∑–¥–µ–ª—ã:
	‚Ä¢	¬´Function Pointers & smc_bind: rationale¬ª
	‚Ä¢	¬´Propagation –º–µ–∂–¥—É —Ñ—É–Ω–∫—Ü–∏—è–º–∏¬ª
	‚Ä¢	¬´–ú–µ—Ç–∞–ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏–µ: Lua ‚Üí MinZ-native¬ª
	‚Ä¢	¬´–ö–æ–Ω–∫—É—Ä–µ–Ω—Ç–Ω–æ—Å—Ç—å: –¥–∏–∑–∞–π–Ω-–∑–∞–º—ã—Å–µ–ª –∏ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è¬ª
	‚Ä¢	¬´–î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ –∏ –ø—Ä–æ–∑—Ä–∞—á–Ω–æ—Å—Ç—å —Ä–µ—à–µ–Ω–∏–π ABI¬ª

‚∏ª

–ì–æ—Ç–æ–≤(–∞) —Å—Ä–∞–∑—É –æ–±–Ω–æ–≤–∏—Ç—å —Ñ–∞–π–ª—ã

–°–∫–∞–∂–∏, –∫–∞–∫–∏–µ –∏–∑ –ø—É–Ω–∫—Ç–æ–≤ (1‚Äì10) –≤–∫–ª—é—á–∞—Ç—å –≤ –ø–µ—Ä–≤—É—é –æ—á–µ—Ä–µ–¥—å. –Ø –º–æ–≥—É:
	‚Ä¢	–¥–æ–ø–æ–ª–Ω–∏—Ç—å SPEC –∏ ADR –ø—Ä—è–º–æ —Å–µ–π—á–∞—Å (–≤ –Ω—É–∂–Ω–æ–π –≥–ª—É–±–∏–Ω–µ),
	‚Ä¢	–¥–æ–±–∞–≤–∏—Ç—å –º–∏–Ω–∏-—Å—Ö–µ–º—ã JSON –¥–ª—è PATCH-TABLE/FRAME-MAP/REPORT-ABI,
	‚Ä¢	–≤—Å—Ç–∞–≤–∏—Ç—å –ø—Ä–∏–º–µ—Ä –≤–µ—Ç–≤–ª–µ–Ω–∏—è —Å —Å–∏–Ω—Ç–µ—Ç–∏—á–µ—Å–∫–∏–º —è–∫–æ—Ä–µ–º (–∏—Å—Ö–æ–¥–Ω–∏–∫ + ASM-—Ñ—Ä–∞–≥–º–µ–Ω—Ç),
	‚Ä¢	–æ—Ñ–æ—Ä–º–∏—Ç—å smc_bind –∏ fun-pointer –∫–∞–∫ –ø–æ–ª–Ω–æ—Ü–µ–Ω–Ω—ã–µ —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏–∏.

–ö–∞–∫–æ–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç: fun pointers + smc_bind ‚Üí propagation to callees ‚Üí metaprogramming ‚Üí concurrency ‚Üí diagnostics schemas? –ò–ª–∏ –ø—Ä–µ–¥–ª–æ–∂–∏ —Å–≤–æ–π –ø–æ—Ä—è–¥–æ–∫ ‚Äî —Å–¥–µ–ª–∞—é.

----
–û—Ç–ª–∏—á–Ω—ã–π –∑–∞–ø—Ä–æ—Å, Alice. –ù–∏–∂–µ ‚Äî –ø–æ–¥–±–æ—Ä–∫–∞ ‚Äúdeveloper-friendly‚Äù –∫–æ–Ω—Ü–µ–ø—Ü–∏–π –∏–∑ Crystal, Elixir, Ruby –∏ Go (–ø–ª—é—Å –Ω–µ–º–Ω–æ–≥–æ ABAP), –∫–æ—Ç–æ—Ä—ã–µ –µ—Å—Ç–µ—Å—Ç–≤–µ–Ω–Ω–æ –ª–æ–∂–∞—Ç—Å—è –Ω–∞ ‚Äú–∞–Ω—Ç–∏-–°–ò‚Äù –∏ –¥—Ä—É–∂–µ–ª—é–±–Ω—ã –∫ Z80. –î–ª—è –∫–∞–∂–¥–æ–π ‚Äî —á—Ç–æ –∏–º–µ–Ω–Ω–æ –±—Ä–∞—Ç—å, –∫–∞–∫ –ø–æ–Ω–∏–∂–∞—Ç—å (lowering) –≤ MinZ –ø–æ–¥ Z80 (SMC-—è–∫–æ—Ä—è, DJNZ, —Ç–∞–±–ª–∏—Ü—ã –ø–µ—Ä–µ—Ö–æ–¥–æ–≤, —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏–µ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã), –∏ –º–∏–Ω–∏–º–∞–ª—å–Ω—ã–µ –Ω–æ—Ä–º–∞—Ç–∏–≤—ã –¥–ª—è SPEC.

‚∏ª

1) Crystal / Ruby ‚Äî —ç—Ä–≥–æ–Ω–æ–º–∏–∫–∞, –∏—Ç–µ—Ä–∞—Ç–æ—Ä—ã, –±–ª–æ–∫–∏, –∏–º–µ–Ω–æ–≤–∞–Ω–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã

1.1 –ò–º–µ–Ω–æ–≤–∞–Ω–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã (Ruby/Crystal-style)

–ü–ª—é—Å: —á–∏—Ç–∞–µ–º–æ—Å—Ç—å –±–µ–∑ —Ä–∞–Ω—Ç–∞–π–º-–Ω–∞–∫–∞–∑–∞–Ω–∏—è.
MinZ:

fun draw(x: u8, y: u8, color: u8) -> void { ... }
draw(x: 10, y: 20, color: 7);

Lowering: —á–∏—Å—Ç–æ –∫–æ–º–ø–∏–ª—è—Ç–æ—Ä–Ω—ã–π —Å–∞—Ö–∞—Ä ‚Üí –ø–µ—Ä–µ—Å—Ç–∞–Ω–æ–≤–∫–∞ –≤ –ø–æ–∑–∏—Ü–∏–æ–Ω–Ω—ã–µ –∞—Ä–≥—É–º–µ–Ω—Ç—ã; –ø–∞—Ç—á–∞—Ç—Å—è —è–∫–æ—Ä—è x$imm0, y$imm0, color$imm0.
SPEC (SHOULD): –∏–º–µ–Ω–æ–≤–∞–Ω–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –±–µ–∑ –æ–≤–µ—Ä—Ö–µ–¥–∞.

1.2 –ë–ª–æ–∫–∏ / –∏—Ç–µ—Ä–∞—Ç–æ—Ä—ã (each, map) ‚Äî –Ω–æ –±–µ–∑ —Ä–∞–Ω—Ç–∞–π–º-–∑–∞–º—ã–∫–∞–Ω–∏–π

–ü–ª—é—Å: –≤—ã—Ä–∞–∑–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å Ruby/Crystal.
MinZ:

arr.each { |x| screen.plot(x, y0, 7) }

Lowering: each ‚Üí —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏–π —Ü–∏–∫–ª. –¢–µ–ª–æ –±–ª–æ–∫–∞ –∏–Ω–ª–∞–π–Ω–∏—Ç—Å—è.
–ü—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ —Å—Å—ã–ª–∫–∏ –Ω–∞ –∏—Ç–µ—Ä–∞—Ç–æ—Ä (&x) ‚Äî –º–∞—Ç–µ—Ä–∏–∞–ª–∏–∑–∞—Ü–∏—è —Å–ª–æ—Ç–∞ (—Å–º. SPEC –ø—Ä–æ &i).
SPEC (MUST): –±–ª–æ–∫–∏ –≤ each/map/... –∏–Ω–ª–∞–π–Ω-–æ–±—è–∑–∞–Ω—ã; –Ω–∏–∫–∞–∫–∏—Ö –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏—Ö –∑–∞–º—ã–∫–∞–Ω–∏–π.

1.3 –ü–∞–π–ø–ª–∞–π–Ω-–æ–ø–µ—Ä–∞—Ç–æ—Ä (Crystal/Ruby —á–µ—Ä–µ–∑ Elixir-–∏–¥–µ—é)

–ü–ª—é—Å: –ª–∏–Ω–µ–π–Ω–∞—è —á–∏—Ç–∞–µ–º–æ—Å—Ç—å.
MinZ:

value |> normalize() |> clamp(0, 255) |> draw(x: _, y: y0)

_|> ‚Äî –ø–æ–∑–∏—Ü–∏—è, –≤ –∫–æ—Ç–æ—Ä—É—é –ø–æ–¥—Å—Ç–∞–≤–ª—è–µ—Ç—Å—è –ø—Ä–µ–¥—ã–¥—É—â–∏–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç.
Lowering: –∫–∞—Å–∫–∞–¥ –≤—ã–∑–æ–≤–æ–≤, –∏–Ω–ª–∞–π–Ω –ø–æ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏; —è–∫–æ—Ä—è –ø–∞—Ç—á–∞—Ç—Å—è –æ–±—ã—á–Ω—ã–º —Å–ø–æ—Å–æ–±–æ–º.
SPEC (SHOULD): |> ‚Äî —á–∏—Å—Ç—ã–π —Å–∞—Ö–∞—Ä, zero-cost.

1.4 defer/ensure (Ruby ensure + Go defer)

–ü–ª—é—Å: –≥–∞—Ä–∞–Ω—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –¥–µ–π—Å—Ç–≤–∏—è –Ω–∞ –≤—ã—Ö–æ–¥–µ –∏–∑ —Ñ—É–Ω–∫—Ü–∏–∏/–±–ª–æ–∫–∞.
MinZ:

fun with_border() -> void {
  screen.set_border(1);
  defer { screen.set_border(0); }
  // ...
}

Lowering: —Ö–≤–æ—Å—Ç–æ–≤–∞—è –≤—Å—Ç–∞–≤–∫–∞ –ø–µ—Ä–µ–¥ RET/–≤—ã—Ö–æ–¥–æ–º –ø–æ –≤—Å–µ–º –ø—É—Ç—è–º (–∫–æ–º–ø–∏–ª—è—Ç–æ—Ä–Ω–∞—è —Ç—Ä–∞–Ω—Å—Ñ–æ—Ä–º–∞—Ü–∏—è), –±–µ–∑ —Å—Ç–µ–∫–∞.
SPEC (MUST): defer ‚Äî —á–∏—Å—Ç–æ —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∞—è –≤—Å—Ç–∞–≤–∫–∞.

‚∏ª

2) Elixir ‚Äî –ø–∞—Ç—Ç–µ—Ä–Ω-–º–∞—Ç—á–∏–Ω–≥ (–æ–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω–æ), –ø–∞–π–ø–ª–∞–π–Ω—ã, –∫–æ—Ä—Ç–µ–∂–∏ –æ—à–∏–±–æ–∫, with

2.1 –ö–æ—Ä—Ç–µ–∂–∏ –æ—à–∏–±–æ–∫ {:ok, v} | {:error, e}

–ü–ª—é—Å: –ø—Ä–æ—Å—Ç—ã–µ –∏ –ø—Ä–µ–¥—Å–∫–∞–∑—É–µ–º—ã–µ –æ—à–∏–±–∫–∏ –±–µ–∑ –∏—Å–∫–ª—é—á–µ–Ω–∏–π.
MinZ –≤–æ–∑–≤—Ä–∞—â–∞–µ–º—ã–π ABI (–ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ):
	‚Ä¢	A ‚Äî tag (0=ok, 1=error),
	‚Ä¢	HL ‚Äî payload (u16/ptr) –∏–ª–∏ —Ñ–∏–∫—Å-—Å–ª–æ—Ç –¥–ª—è u8.
Lowering: —É—Å–ª–æ–≤–Ω–∞—è –≤–µ—Ç–∫–∞ –ø–æ A.
SPEC (MUST): –∑–∞—Ñ–∏–∫—Å–∏—Ä–æ–≤–∞—Ç—å ABI –¥–ª—è error tuples.

2.2 with (Elixir-style ¬´—Ä–∞–Ω–Ω–∏–π –≤—ã—Ö–æ–¥ –ø—Ä–∏ –æ—à–∏–±–∫–µ¬ª)

MinZ:

with {ok, a} <- load_a(),
     {ok, b} <- load_b(a),
do {
  draw(a, b)
}

Lowering: —Ü–µ–ø–æ—á–∫–∞ CALL + CP A,0 + JR NZ, early_return. –ë–µ–∑ –∏—Å–∫–ª—é—á–µ–Ω–∏–π.
SPEC (SHOULD): with ‚Äî —Å–∞—Ö–∞—Ä, zero-cost, –≤–µ—Ç–≤–ª–µ–Ω–∏–µ –ø–æ A.

2.3 –ü–∞—Ç—Ç–µ—Ä–Ω-–º–∞—Ç—á–∏–Ω–≥ ‚Äî —Ç–æ–ª—å–∫–æ –∫–æ–Ω—Å—Ç–∞–Ω—Ç—ã/–º–µ–ª–∫–∏–µ —Ç–µ–≥–∏

MinZ:

match key {
  0 => up(),
  1 => down(),
  _ => {}
}

Lowering: –ø–ª–æ—Ç–Ω—ã–π –¥–∏–∞–ø–∞–∑–æ–Ω ‚Üí –¥–∂–∞–º–ø-—Ç–∞–±–ª–∏—Ü–∞; –∏–Ω–∞—á–µ CP/JR Z.
SPEC (MUST): —Ç–æ–ª—å–∫–æ –∫–æ–Ω—Å—Ç–∞–Ω—Ç—ã/—Ç–µ–≥–∏; –±–µ–∑ —Å—Ç—Ä—É–∫—Ç—É—Ä–Ω–æ–≥–æ —Ä–∞—Å–ø–∞–∫–æ–≤–æ—á–Ω–æ–≥–æ —Ä–∞–Ω—Ç–∞–π–º–∞.

‚∏ª

3) Go ‚Äî ¬´goroutines¬ª –∏ –∫–∞–Ω–∞–ª—ã (—É–ø—Ä–æ—â—ë–Ω–Ω–æ, –∫–æ–æ–ø–µ—Ä–∞—Ç–∏–≤–Ω–æ)

3.1 spawn/yield (–∫–æ–æ–ø–µ—Ä–∞—Ç–∏–≤–Ω—ã–µ ¬´–ø—Ä–æ—Ü–µ—Å—Å—ã¬ª)

–ü–ª—é—Å: —Å—Ç—Ä—É–∫—Ç—É—Ä–Ω–∞—è –∫–æ–Ω–∫—É—Ä–µ–Ω—Ç–Ω–æ—Å—Ç—å –±–µ–∑ –ø–æ—Ç–æ–∫–æ–≤/—Å—Ç–µ–∫–∞.
MinZ:

spawn worker(id: 1);
yield;  // —Ç–æ—á–∫–∏ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏—è

Lowering: –∫–∞–∂–¥–∞—è ¬´–∫–æ—Ä—É—Ç–∏–Ω–∞¬ª ‚Äî state-machine —Å —Å–æ—Å—Ç–æ—è–Ω–∏–µ–º –≤ —Ñ–∏–∫—Å-—Å–ª–æ—Ç–µ/–±–∞–Ω–∫–µ; yield ‚Äî –ø–µ—Ä–µ—Ö–æ–¥/—Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ.
SPEC (SHOULD): spawn/yield ‚Äî –∫–æ–æ–ø–µ—Ä–∞—Ç–∏–≤–Ω—ã–µ, –±–µ–∑ —Å—Ç–µ–∫-–ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏—è.

3.2 –ö–∞–Ω–∞–ª—ã ‚Äî –∫–æ–ª—å—Ü–µ–≤–æ–π –±—É—Ñ–µ—Ä (–±–µ–∑ –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏)

MinZ:

let ch: channel[u8, 16];
try_send(ch, v);
if try_recv(ch, &v) { ... }

Lowering: —Ñ–∏–∫—Å-—Ä–∞–∑–º–µ—Ä–Ω—ã–π –º–∞—Å—Å–∏–≤ + head/tail –≤ —Å–ª–æ—Ç–∞—Ö.
SPEC (MUST): —Ç–æ–ª—å–∫–æ non-blocking try_send/try_recv; select ‚Äî —Å–∏–Ω—Ç–∞–∫—Å–∏—á–µ—Å–∫–∏–π —Å–∞—Ö–∞—Ä –Ω–∞ if/else.

3.3 defer ‚Äî —É–∂–µ –≤ ¬ß1.4 (Go-like)

‚∏ª

4) ABAP ‚Äî —á–∏—Ç–∞–µ–º–æ—Å—Ç—å, –∏–º–µ–Ω–æ–≤–∞–Ω–Ω—ã–µ –∞—Ä–≥—É–º–µ–Ω—Ç—ã, LOOP

4.1 EXPORTING / IMPORTING / CHANGING ‚Üí –∏–º–µ–Ω–æ–≤–∞–Ω–Ω—ã–µ + changing

MinZ:

fun step(importing x: u8, changing y: ref u8) -> void { ... }

Lowering: importing ‚Äî –æ–±—ã—á–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã (SMC-—è–∫–æ—Ä—è), changing ref ‚Äî —Å–ª–æ—Ç—ã/–∞–¥—Ä–µ—Å–∞ —Å write-back.
SPEC (SHOULD): –ø–æ–¥–¥–µ—Ä–∂–∞—Ç—å changing/ref –≤–Ω—É—Ç—Ä–∏ –ª–µ–∫—Å–∏–∫–∏; escape —Å—Å—ã–ª–æ–∫ ‚Äî –∑–∞–ø—Ä–µ—â—ë–Ω.

4.2 LOOP AT ... DESCENDING ‚Üí DJNZ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é

MinZ:

for i in arr.rev() { ... }  // –∏–ª–∏ for i in N..0
``]
**Lowering:** `LD B, N+1; ... DJNZ` (+ `i=B-1`), –ø—Ä–∏ `&i` ‚Äî –º–∞—Ç–µ—Ä–∏–∞–ª–∏–∑–∞—Ü–∏—è —Å–ª–æ—Ç–∞.  
**SPEC (MUST):** –æ–±—Ä–∞—Ç–Ω—ã–µ –¥–∏–∞–ø–∞–∑–æ–Ω—ã ‚Üí DJNZ.

### 4.3 –ö–ª—é—á–µ–≤—ã–µ —Å–ª–æ–≤–∞ ‚Üí —á–∏—Ç–∞–µ–º–æ—Å—Ç—å –±–µ–∑ —Ä–∞–Ω—Ç–∞–π–º–∞
ABAP-style ¬´–≥–ª–∞–≥–æ–ª+–æ–±—ä–µ–∫—Ç¬ª: `screen.set_border(color: 7)` ‚Äî **–æ—Å—Ç–∞–≤–∏—Ç—å**: —ç—Ç–æ —Ç–æ–ª—å–∫–æ —Å–∏–Ω—Ç–∞–∫—Å–∏—Å, –±–µ–∑ —Ü–µ–Ω—ã.  
**SPEC (SHOULD):** keyword-style –æ—Å—Ç–∞—ë—Ç—Å—è —Å–∞—Ö–∞—Ä–æ–º.

---

## 5) –û–±—â–∏–µ —ç—Ä–≥–æ–Ω–æ–º–∏—á–Ω—ã–µ –∫–æ–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ (–ª–µ–≥–∫–æ –ª–æ–∂–∞—Ç—Å—è –Ω–∞ Z80)

### 5.1 `match` (Crystal/Elixir-like) ‚Äî —É–∂–µ –µ—Å—Ç—å
**Lowering:** —Ç–∞–±–ª–∏—Ü—ã –ø–µ—Ä–µ—Ö–æ–¥–æ–≤/—Ü–µ–ø–æ—á–∫–∏.

### 5.2 `inline fun`, `meta` (Crystal –º–∞–∫—Ä–æ—Å—ã / Zig comptime-–ª–∞–π—Ç)
- `inline fun` ‚Äî –æ–±—è–∑–∞—Ç–µ–ª–µ–Ω (–Ω—É–ª–µ–≤–æ–π –≤—ã–∑–æ–≤).  
- `meta fun` ‚Äî **—Ñ–∞–∑–∞ 2**: –∫–æ–º–ø–∞–π–ª-—Ç–∞–π–º –≥–µ–Ω–µ—Ä–∞—Ü–∏—è —Ç–∞–±–ª–∏—Ü/–∫–æ–¥–∞.  
**SPEC (MUST/SHOULD):** inline ‚Äî MUST; meta ‚Äî SHOULD (–ø–æ—ç—Ç–∞–ø–Ω–æ).

### 5.3 –ö–æ–Ω—Å—Ç–∞–Ω—Ç–Ω—ã–µ –≤—ã—Ä–∞–∂–µ–Ω–∏—è, `const`
–ì–µ–Ω–µ—Ä–∞—Ü–∏—è lookup-—Ç–∞–±–ª–∏—Ü, –∞–¥—Ä–µ—Å–æ–≤, —Ä–∞–∑–º–µ—Ä–æ–≤ ‚Äî **–Ω–∞ —ç—Ç–∞–ø–µ –∫–æ–º–ø–∏–ª—è—Ü–∏–∏**.  
**SPEC (MUST):** `const` –∏ –ø—Ä–æ—Å—Ç—ã–µ const-expr.

### 5.4 `smc_bind` ‚Äî —á–∞—Å—Ç–∏—á–Ω–æ–µ —Å–≤—è–∑—ã–≤–∞–Ω–∏–µ
**–ü–ª—é—Å:** –∫–∞–∫ ¬´–∑–∞–º—ã–∫–∞–Ω–∏–µ¬ª –±–µ–∑ —Ä–∞–Ω—Ç–∞–π–º–∞ –∏ heap.  
**MinZ:**
```minz
let plot_white = smc_bind plot(color=7);
plot_white(10, 20);

Lowering: –∑–∞—à–∏–≤–∞—é—Ç—Å—è –∑–Ω–∞—á–µ–Ω–∏—è –≤—ã–±—Ä–∞–Ω–Ω—ã—Ö —è–∫–æ—Ä–µ–π; –ø–∞—Ç—á–∞—Ç—Å—è —Ç–æ–ª—å–∫–æ –Ω–µ–∑–∞—à–∏—Ç—ã–µ.
SPEC (SHOULD): smc_bind –∫–∞–∫ zero-cost specialize.

5.5 –ü–∞–π–ø–ª–∞–π–Ω—ã, with ‚Äî —É–∂–µ –≤—ã—à–µ.

‚∏ª

6) –Ø–∑—ã–∫–æ–≤—ã–µ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è (—á—Ç–æ–±—ã –æ—Å—Ç–∞—Ç—å—Å—è ¬´–∞–Ω—Ç–∏-–°–ò¬ª –∏ –±—ã—Å—Ç—Ä—ã–º–∏)
	‚Ä¢	–ù–∏–∫–∞–∫–∏—Ö –∏—Å–∫–ª—é—á–µ–Ω–∏–π (runtime) ‚Äî —Ç–æ–ª—å–∫–æ –∫–æ—Ä—Ç–µ–∂–∏ –æ—à–∏–±–æ–∫.
	‚Ä¢	–ù–∏–∫–∞–∫–∏—Ö –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏—Ö –∑–∞–º—ã–∫–∞–Ω–∏–π ‚Äî –±–ª–æ–∫–∏ –∏–Ω–ª–∞–π–Ω.
	‚Ä¢	–ù–∏–∫–∞–∫–æ–≥–æ —Ä–µ—Ñ–ª–µ–∫—Å–∏–≤–Ω–æ–≥–æ RTTI ‚Äî —Ç–µ–≥–∏/—Å–∏–º–≤–æ–ª—ã ‚Üí –∫–æ–Ω—Å—Ç–∞–Ω—Ç—ã.
	‚Ä¢	–û—Å—Ç–æ—Ä–æ–∂–Ω–æ —Å —É–∫–∞–∑–∞—Ç–µ–ª—è–º–∏ ‚Äî –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é ref –ª–æ–∫–∞–ª—å–Ω—ã–π (escape –∑–∞–ø—Ä–µ—â—ë–Ω); –¥–ª—è —Ä–µ–µ–Ω—Ç–µ—Ä–∞–±–µ–ª—å–Ω–æ—Å—Ç–∏ ‚Äî @frame —Ä–µ–∂–∏–º—ã.
	‚Ä¢	Pattern matching –±–µ–∑ —Ä–∞—Å–ø–∞–∫–æ–≤–∫–∏ —Å—Ç—Ä—É–∫—Ç—É—Ä (—Ç–æ–ª—å–∫–æ –∫–æ–Ω—Å—Ç–∞–Ω—Ç—ã/—Ç–µ–≥–∏).
	‚Ä¢	–ì–µ–Ω–µ—Ä–∏–∫–∏/–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã ‚Äî –ø–æ–∑–∂–µ, —á–µ—Ä–µ–∑ –º–µ—Ç–∞/—Å–ø–µ—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—é.

‚∏ª

7) –ú–∏–Ω–∏-–Ω–æ—Ä–º–∞—Ç–∏–≤—ã –¥–ª—è –≤–∫–ª—é—á–µ–Ω–∏—è –≤ SPEC
	1.	–ò–º–µ–Ω–æ–≤–∞–Ω–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã ‚Äî SHOULD, —Å–∞—Ö–∞—Ä –±–µ–∑ —Ä–∞–Ω—Ç–∞–π–º–∞.
	2.	–ë–ª–æ–∫–∏ –≤ –∏—Ç–µ—Ä–∞—Ç–æ—Ä–∞—Ö ‚Äî MUST –∏–Ω–ª–∞–π–Ω–∏—Ç—å—Å—è (–Ω–∏–∫–∞–∫–∏—Ö heap/closure).
	3.	–ü–∞–π–ø–ª–∞–π–Ω—ã |> ‚Äî SHOULD, —á–∏—Å—Ç—ã–π —Å–∞—Ö–∞—Ä.
	4.	–ö–æ—Ä—Ç–µ–∂–∏ –æ—à–∏–±–æ–∫ ‚Äî MUST: A=tag, HL=payload (–∏–ª–∏ —Ñ–∏–∫—Å-—Å–ª–æ—Ç).
	5.	with ‚Äî SHOULD, —Ä–∞–∑–≤–æ—Ä–∞—á–∏–≤–∞–µ—Ç—Å—è –≤ –≤–µ—Ç–≤–ª–µ–Ω–∏—è.
	6.	match ‚Äî MUST: —Ç–∞–±–ª–∏—Ü—ã –ø–µ—Ä–µ—Ö–æ–¥–æ–≤/—Ü–µ–ø–æ—á–∫–∏.
	7.	defer/ensure ‚Äî MUST: —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∞—è –≤—Å—Ç–∞–≤–∫–∞ –ø–µ—Ä–µ–¥ RET.
	8.	spawn/yield + –∫–∞–Ω–∞–ª—ã ‚Äî SHOULD: –∫–æ–æ–ø–µ—Ä–∞—Ç–∏–≤, –∫–æ–ª—å—Ü–µ–≤—ã–µ –±—É—Ñ–µ—Ä—ã, select=—Å–∞—Ö–∞—Ä.
	9.	changing ref ‚Äî SHOULD: —Å—Å—ã–ª–∫–∏ –≤–Ω—É—Ç—Ä–∏ –ª–µ–∫—Å–∏–∫–∏; escape –∑–∞–ø—Ä–µ—â—ë–Ω.
	10.	for i in N..0 / .rev() ‚Äî MUST –≤ DJNZ; &i ‚Üí –º–∞—Ç–µ—Ä–∏–∞–ª–∏–∑–∞—Ü–∏—è —Å–ª–æ—Ç–∞.
	11.	smc_bind ‚Äî SHOULD: —á–∞—Å—Ç–∏—á–Ω–∞—è —Å–ø–µ—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è —è–∫–æ—Ä–µ–π.
	12.	meta fun/const ‚Äî inline –∏ –ø—Ä–æ—Å—Ç—ã–µ const-expr MUST, meta SHOULD (–ø–æ—ç—Ç–∞–ø–Ω–æ).

‚∏ª

8) –ü—Ä–∏–º–µ—Ä—ã MinZ (—Å –ø–æ–Ω–∏–∂–µ–Ω–∏–µ–º)

8.1 –ò—Ç–µ—Ä–∞—Ç–æ—Ä —Å –±–ª–æ–∫–æ–º (–∏–Ω–ª–∞–π–Ω) –∏ DJNZ

arr.each_rev { |x|
  screen.plot(x, y0, 7)
}

Lowering (–∏–¥–µ—è):
	‚Ä¢	LD B, len+1
	‚Ä¢	.loop: (x = base + B-1) ‚Üí plot (SMC —è–∫–æ—Ä—è)
	‚Ä¢	DJNZ .loop

8.2 –ü–∞–π–ø–ª–∞–π–Ω—ã –∏ with

with {ok, v} <- read_sensor(),
     {ok, u} <- v |> normalize() |> clamp(0,255),
do {
  set_brightness(u)
}

Lowering: –≤—ã–∑–æ–≤—ã ‚Üí –≤–µ—Ç–≤–ª–µ–Ω–∏—è –ø–æ A (tag), –±–µ–∑ –∏—Å–∫–ª—é—á–µ–Ω–∏–π/RTTI.

8.3 smc_bind (—á–∞—Å—Ç–∏—á–Ω–∞—è —Å–ø–µ—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è)

@abi(smc)
fun plot(x: u8, y: u8, col: u8) -> void { ... }

let plot_white = smc_bind plot(col=7);

for i in 0..N {
  plot_white(x0 + i, y0)
}

Lowering: —è–∫–æ—Ä—å col$imm0 –∑–∞—à–∏—Ç 7; –ø–∞—Ç—á–∞—Ç—Å—è —Ç–æ–ª—å–∫–æ x/y.

8.4 changing ref –ø–æ-ABAP‚Äô—É

fun step(importing x: u8, changing y: ref u8) -> void {
  // ...
  *y = *y + x;
}

Lowering: y ‚Äî –∞–¥—Ä–µ—Å —Å–ª–æ—Ç–∞, *y ‚Äî LD A,(y) / LD (y),A. –°—Å—ã–ª–∫–∞ –Ω–µ —É—Ç–µ–∫–∞–µ—Ç –∑–∞ –ª–µ–∫—Å–∏—á–µ—Å–∫–∏–π –±–ª–æ–∫.

‚∏ª

9) –ù–µ–±–æ–ª—å—à–∞—è —Ç–∞–±–ª–∏—Ü–∞ ¬´—á—Ç–æ –±–µ—Ä—ë–º –∏ –∫–∞–∫ –º–∞–ø–∏–º¬ª

–ò—Å—Ç–æ—á–Ω–∏–∫	–ö–æ–Ω—Ü–µ–ø—Ç	–í MinZ	Lowering –Ω–∞ Z80
Ruby/Cr	Named args	f(x:.., y:..)	–°–∞—Ö–∞—Ä ‚Üí –ø–æ–∑–∏—Ü–∏–æ–Ω–Ω—ã–µ
Ruby/Cr	Blocks/each/map	`arr.each {	x
Elixir	Pipelines	`	>`
Elixir	with	–†–∞–Ω–Ω–∏–π –≤—ã—Ö–æ–¥ –ø–æ —Ç–µ–≥—É	CP A,0 / JR
Elixir	Error tuples	{:ok,v}/{:error,e}	A tag + HL payload
Elixir	Match (–∫–æ–Ω—Å—Ç–∞–Ω—Ç—ã)	match v { ... }	–¢–∞–±–ª–∏—Ü–∞/—Ü–µ–ø–æ—á–∫–∞
Go	defer	defer { ... }	–°—Ç–∞—Ç–∏—á–µ—Å–∫–∞—è –≤—Å—Ç–∞–≤–∫–∞
Go	spawn/yield/channels	–ö–æ–æ–ø–µ—Ä–∞—Ç–∏–≤ + –∫–æ–ª—å—Ü–æ	–°—Ç–µ–π—Ç-–º–∞—à–∏–Ω–∞
ABAP	EXPORTING/CHANGING	importing/changing ref	SMC-—è–∫–æ—Ä—è + —Å–ª–æ—Ç—ã
ABAP	LOOP DESCENDING	.rev() / N..0	DJNZ


‚∏ª

10) –ö—Ä–∏—Ç–∏–∫–∞ –∏ –±–∞–ª–∞–Ω—Å
	‚Ä¢	–ü–æ—Ö–≤–∞–ª–∞: –≤—Å—ë –≤—ã—à–µ ‚Äî zero-cost –∏–ª–∏ –±–ª–∏–∑–∫–æ –∫ —ç—Ç–æ–º—É; —á–∏—Ç–∞–µ–º–æ—Å—Ç—å –∏ –ø—Ä–µ–¥—Å–∫–∞–∑—É–µ–º–æ—Å—Ç—å –∫–∞–∫ —É Ruby/Crystal/Elixir, —Å –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å—é Z80-–∞—Å–º–∞.
	‚Ä¢	–û—Å—Ç–æ—Ä–æ–∂–Ω–æ: ref –∏ &i –ª–æ–º–∞—é—Ç –∏–¥–µ–∞–ª—å–Ω—ã–µ DJNZ-–ø–µ—Ç–ª–∏ ‚Üí –¥–µ–æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –æ—Å–æ–∑–Ω–∞–Ω–Ω–æ, —Ç–æ–ª—å–∫–æ –∫–æ–≥–¥–∞ –Ω—É–∂–Ω–æ.
	‚Ä¢	–ò–∑–±–µ–≥–∞–µ–º: –∏—Å–∫–ª—é—á–µ–Ω–∏–π, –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏—Ö –∑–∞–º—ã–∫–∞–Ω–∏–π, —Ä–µ—Ñ–ª–µ–∫—Å–∏–∏, —Ç—è–∂—ë–ª—ã—Ö –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–æ–≤ ‚Äî —ç—Ç–æ PDP-–º–∏—Ä, –Ω–µ Z80.
	‚Ä¢	–≠–≤–æ–ª—é—Ü–∏—è: –¥–æ–±–∞–≤–∏–º meta fun/—á–∞—Å—Ç–∏—á–Ω—É—é —Å–ø–µ—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—é (smc_bind) –∏, –ø–æ–∑–∂–µ, –ø—Ä–æ—Å—Ç—ã–µ generics —á–µ—Ä–µ–∑ –∫–æ–º–ø–∞–π–ª-—Ç–∞–π–º —Å–ø–µ—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—é ‚Äî –±–µ–∑ VM/RTTI.

‚∏ª

–ï—Å–ª–∏ —Ö–æ—á–µ—à—å, —è –¥–æ–±–∞–≤–ª—é —ç—Ç–∏ —Ä–∞–∑–¥–µ–ª—ã –≤ —Ç–≤–æ–∏ SPEC.md –∏ ADR.md (—Å –Ω–æ—Ä–º–∞—Ç–∏–≤–∞–º–∏ MUST/SHOULD, –ø—Ä–∏–º–µ—Ä–∞–º–∏ –ø–æ–Ω–∏–∂–µ–Ω–∏—è –∏ –º–∏–Ω–∏-—Ç–∞–±–ª–∏—Ü–µ–π T-states), –ø–ª—é—Å —Å—Ö–µ–º—ã JSON –¥–ª—è –æ—Ç—á—ë—Ç–æ–≤ (PATCH-TABLE, REPORT-ABI). –°–∫–∞–∂–∏, –∫–∞–∫–∏–µ –±–ª–æ–∫–∏ –≤–∫–ª—é—á–∏—Ç—å –≤ –ø–µ—Ä–≤—É—é –æ—á–µ—Ä–µ–¥—å: named args + error tuples + with, –∏–ª–∏ iterators + blocks, –∏–ª–∏ spawn/channels. –Ø –º–æ–≥—É —Å—Ä–∞–∑—É –ø–µ—Ä–µ–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å —Ñ–∞–π–ª—ã.
----



–û—Ç–ª–∏—á–Ω–æ, –¥–∞–≤–∞–π –∑–∞—Ñ–∏–∫—Å–∏—Ä—É–µ–º –ø–µ—Ä–≤—ã–π —ç—à–µ–ª–æ–Ω —É–ª—É—á—à–µ–Ω–∏–π ‚Äî —Ç–æ–ª—å–∫–æ —Ç–µ —Ñ–∏—á–∏, –∫–æ—Ç–æ—Ä—ã–µ —Ä–µ–∑–∫–æ —É–ª—É—á—à–∞—é—Ç —ç—Ä–≥–æ–Ω–æ–º–∏–∫—É –±–µ–∑ —Ç—è–∂—ë–ª–æ–π —Ä–∞–Ω—Ç–∞–π–º-–ª–æ–≥–∏–∫–∏, —Ö–æ—Ä–æ—à–æ –ª–æ–∂–∞—Ç—Å—è –Ω–∞ anti-C / Z80-–Ω–∞—Ç–∏–≤–Ω–æ—Å—Ç—å, –∏ –Ω–µ —Ç—Ä–µ–±—É—é—Ç –º–µ—Ç–∞–ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏—è –¥–ª—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏. –í –∫–æ–Ω—Ü–µ –¥–∞–º FuturePath (—Å—Ä–µ–¥–Ω–µ- –∏ –¥–æ–ª–≥–æ—Å—Ä–æ—á–Ω—ã–π –ø–ª–∞–Ω), –∫—É–¥–∞ –ø–æ–ø–∞–¥—É—Ç –∫–∞–Ω–∞–ª—ã/—Å—Ç–µ–π—Ç-–º–∞—à–∏–Ω—ã –∏ –ø—Ä–æ—á–∏–µ ¬´—Ç—è–∂—ë–ª—ã–µ¬ª –≤–µ—â–∏.

‚∏ª

üéØ –ü—Ä–∏–Ω—Ü–∏–ø—ã –æ—Ç–±–æ—Ä–∞ (First Echelon)
	‚Ä¢	Zero-/near-zero cost: –≤–µ—Å—å —Å–∞—Ö–∞—Ä –ø–æ–Ω–∏–∂–∞–µ—Ç—Å—è –≤ —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω—ã–π Z80-–∫–æ–¥.
	‚Ä¢	–ë–µ–∑ —Ä–∞–Ω—Ç–∞–π–º–∞ –∏ –º–µ—Ç–∞–ø—Ä–æ–≥–∞: —Ç–æ–ª—å–∫–æ —Ç–æ, —á—Ç–æ —Ä–µ–∞–ª—å–Ω–æ –∫–æ–º–ø–∏–ª—è—Ç–æ—Ä —É–º–µ–µ—Ç ¬´—Ä–∞—Å–∫–ª–∞–¥—ã–≤–∞—Ç—å¬ª —Å–∞–º.
	‚Ä¢	–õ–æ–∫–∞–ª—å–Ω—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –∫–æ–º–ø–∏–ª—è—Ç–æ—Ä–∞: –ø–∞—Ä—Å–µ—Ä ‚Üí lowering ‚Üí codegen; –±–µ–∑ —Å–ª–æ–∂–Ω–æ–π –ø–æ–¥–¥–µ—Ä–∂–∫–∏ –≤ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–æ–π –±–∏–±–ª–∏–æ—Ç–µ–∫–µ.
	‚Ä¢	–°–∏–Ω–µ—Ä–≥–∏—è —Å SMC-—è–∫–æ—Ä—è–º–∏: –≤—Å—ë –¥–æ–ª–∂–Ω–æ –¥—Ä—É–∂–∏—Ç—å —Å –Ω–∞—à–µ–π –º–æ–¥–µ–ª—å—é ¬´–∏–º–º–µ–¥–∏–∞—Ç—ã –≤–Ω—É—Ç—Ä–∏ —Ñ—É–Ω–∫—Ü–∏–∏ + –ø–æ–≤—Ç–æ—Ä–Ω–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ –∏–∑ –∞–¥—Ä–µ—Å–∞ –∏–º–º–µ–¥–∏–∞—Ç–∞¬ª.

‚∏ª

‚úÖ –ü–µ—Ä–≤—ã–π —ç—à–µ–ª–æ–Ω (–≤–Ω–µ–¥—Ä—è–µ–º —Å–µ–π—á–∞—Å)

1) –ò–º–µ–Ω–æ–≤–∞–Ω–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã (Ruby/Crystal-style)

–ü–æ—á–µ–º—É: +—á–∏—Ç–∞–±–µ–ª—å–Ω–æ—Å—Ç—å, 0 –æ–≤–µ—Ä—Ö–µ–¥–∞.
–ö–∞–∫: –ø–∞—Ä—Å–µ—Ä –ø–µ—Ä–µ—Å—Ç–∞–≤–ª—è–µ—Ç –≤ –ø–æ–∑–∏—Ü–∏–æ–Ω–Ω—ã–µ; –ø–∞—Ç—á–∞—Ç—Å—è SMC-—è–∫–æ—Ä—è x$imm0, y$imm0, color$imm0.

fun draw(x: u8, y: u8, color: u8) -> void { ... }
draw(x: 10, y: 20, color: 7);  // —Å–∞—Ö–∞—Ä ‚Üí draw(10, 20, 7)

DoD: —é–Ω–∏—Ç-—Ç–µ—Å—Ç—ã –ø–µ—Ä–µ—Å—Ç–∞–Ω–æ–≤–∫–∏, –æ—à–∏–±–∫–∏ –ø—Ä–∏ –ø—Ä–æ–ø—É—Å–∫–µ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã—Ö, –¥—É–±–ª–∏–∫–∞—Ç—ã ‚Äî compile error.

‚∏ª

2) –ö–æ—Ä—Ç–µ–∂–∏ –æ—à–∏–±–æ–∫ + with (Elixir-style, –±–µ–∑ –∏—Å–∫–ª—é—á–µ–Ω–∏–π)

–ü–æ—á–µ–º—É: —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π —Å–ø–æ—Å–æ–± –æ—à–∏–±–æ–∫ –±–µ–∑ —Ä–∞–Ω—Ç–∞–π–º–∞.
ABI: A = —Ç–µ–≥ (0=ok, 1=error), HL = payload (u16/ptr) –∏–ª–∏ —Ñ–∏–∫—Å-—Å–ª–æ—Ç –¥–ª—è u8.
Lowering with: —Ü–µ–ø–æ—á–∫–∞ –≤—ã–∑–æ–≤–æ–≤ —Å —Ä–∞–Ω–Ω–∏–º –≤—ã—Ö–æ–¥–æ–º –ø–æ A.

fun load() -> {:ok, u16} | {:error, u8};

with {ok, a} <- load(),
     {ok, b} <- next(a),
do {
  use(b)
}

DoD: —Ç–µ—Å—Ç—ã: ok‚Üíok‚Üído; error –Ω–∞ –ø–µ—Ä–≤–æ–º/–≤—Ç–æ—Ä–æ–º —à–∞–≥–µ; —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ ABI.

‚∏ª

3) match –ø–æ –∫–æ–Ω—Å—Ç–∞–Ω—Ç–∞–º/—Ç–µ–≥–∞–º (Elixir/Crystal-–≤–∫—É—Å)

–ü–æ—á–µ–º—É: –¥–µ–∫–ª–∞—Ä–∞—Ç–∏–≤–Ω–æ—Å—Ç—å, –±—ã—Å—Ç—Ä—ã–π lowering.
Lowering: –ø–ª–æ—Ç–Ω—ã–µ –∫–ª—é—á–∏ ‚Üí –¥–∂–∞–º–ø-—Ç–∞–±–ª–∏—Ü–∞; —Ä–∞–∑—Ä–µ–∂—ë–Ω–Ω—ã–µ ‚Üí CP/JR Z.

match key {
  0 => up(),
  1 => down(),
  _ => {}
}

DoD: –∞–≤—Ç–æ–≥–µ–Ω–µ—Ä–∞—Ü–∏—è —Ç–∞–±–ª–∏—Ü—ã, –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç—å –ø–æ –≥—Ä–∞–Ω–∏—Ü–∞–º, fallthrough –∑–∞–ø—Ä–µ—â—ë–Ω.

‚∏ª

4) defer / ensure (Go+Ruby)

–ü–æ—á–µ–º—É: —á–∏—Å—Ç–æ—Ç–∞ –∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å –æ—Å–≤–æ–±–æ–∂–¥–µ–Ω–∏–π/—Å–±—Ä–æ—Å–æ–≤; –±–µ–∑ —Å—Ç–µ–∫–∞.
Lowering: —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∞—è –≤—Å—Ç–∞–≤–∫–∞ –ø–µ—Ä–µ–¥ –∫–∞–∂–¥—ã–º RET/–≤—ã—Ö–æ–¥–æ–º.

fun scoped() {
  screen.set_border(1);
  defer { screen.set_border(0); }
  // ...
} // –∫–æ–º–ø–∏–ª—è—Ç–æ—Ä –≤—Å—Ç–∞–≤–∏—Ç –≤—ã–∑–æ–≤ –ø–µ—Ä–µ–¥ –≤–æ–∑–≤—Ä–∞—Ç–æ–º –≤–æ –≤—Å–µ—Ö –ø—É—Ç—è—Ö

DoD: CFG-–∞–Ω–∞–ª–∏–∑ –≤—Å–µ—Ö –ø—É—Ç–µ–π; –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –¥—É–±–ª–µ–π –∫–æ–¥–∞.

‚∏ª

5) –î–∏–∞–ø–∞–∑–æ–Ω—ã –∏ –∏—Ç–µ—Ä–∞—Ç–æ—Ä—ã ‚Üí DJNZ (anti-C —Ü–∏–∫–ª –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é)

–ü–æ—á–µ–º—É: –∫–∞–Ω–æ–Ω–∏—á–µ—Å–∫–∞—è Z80-–ø–µ—Ç–ª—è, –º–∏–Ω–∏–º—É–º —Ç–∞–∫—Ç–æ–≤.
Lowering: for i in N..0 {} ‚Üí LD B, N+1; ...; DJNZ.
–ü—Ä–∏ &i ‚Äî –º–∞—Ç–µ—Ä–∏–∞–ª–∏–∑–∞—Ü–∏—è —Å–ª–æ—Ç–∞ (—Å–º. –ø.6).

for i in 10..0 {
  screen.set_pixel(x, i, 7);
}

DoD: —Ç–µ—Å—Ç—ã: –∫–æ–Ω—Å—Ç–∞–Ω—Ç–Ω—ã–µ/–Ω–µ–∫–æ–Ω—Å—Ç–∞–Ω—Ç–Ω—ã–µ –≥—Ä–∞–Ω–∏—Ü—ã, –ø—É—Å—Ç–æ–π –¥–∏–∞–ø–∞–∑–æ–Ω, –≤–ª–æ–∂–µ–Ω–Ω—ã–µ —Ü–∏–∫–ª—ã.

‚∏ª

6) –°—Å—ã–ª–∫–∏ –Ω–∞ —Å—á—ë—Ç—á–∏–∫ (&i) –∏ –º–∞—Ç–µ—Ä–∏–∞–ª–∏–∑–∞—Ü–∏—è

–ü–æ—á–µ–º—É: —Ä–µ—Ñ–µ—Ä–µ–Ω—Å—ã —É–¥–æ–±–Ω—ã, –Ω–æ –ª–æ–º–∞—é—Ç ¬´—á–∏—Å—Ç—ã–π¬ª DJNZ ‚Äî –¥–µ–ª–∞–µ–º —ç—Ç–æ –æ—Å–æ–∑–Ω–∞–Ω–Ω–æ –∏ —è–≤–Ω–æ.
Lowering: —Å–æ–∑–¥–∞—ë–º —Å–ª–æ—Ç i_slot, –Ω–∞ –∫–∞–∂–¥–æ–π –∏—Ç–µ—Ä–∞—Ü–∏–∏ –∑–∞–ø–∏—Å—ã–≤–∞–µ–º i (B-1) —Ç—É–¥–∞, &i ‚Üí &i_slot.

for i in 10..0 {
  let r: ref u8 = &i;  // –≤–∫–ª—é—á–∞–µ—Ç –º–∞—Ç–µ—Ä–∏–∞–ª–∏–∑–∞—Ü–∏—é
  use_ref(r);
}

DoD: –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ –∫–æ–º–ø–∏–ª—è—Ç–æ—Ä–∞ –æ –¥–µ–æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏; –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–µ –∞–¥—Ä–µ—Å–∞ –∏ —Å—Ä–æ–∫–∏ –∂–∏–∑–Ω–∏ (–ª–µ–∫—Å–∏—á–µ—Å–∫–∞—è –æ–±–ª–∞—Å—Ç—å).

‚∏ª

7) SMC-guard –±–ª–æ–∫ (—Å–Ω–∞–ø—à–æ—Ç –ø–∞—Ç—á-–±–∞–π—Ç–æ–≤ —Å –∞–≤—Ç–æ-–æ—Ç–∫–∞—Ç–æ–º)

–ü–æ—á–µ–º—É: –ø—Ä–æ—Å—Ç–æ–π —Å–ø–æ—Å–æ–± –±–µ–∑–æ–ø–∞—Å–Ω–æ–π —Ä–µ–∫—É—Ä—Å–∏–∏/—Ä–µ–µ–Ω—Ç–µ—Ä–∞–±–µ–ª—å–Ω–æ—Å—Ç–∏ –Ω–∞ @abi(smc) –±–µ–∑ —Ä—É—á–Ω—ã—Ö –ø—Ä–∏–º–∏—Ç–∏–≤–æ–≤.
Lowering: –≤—Ö–æ–¥ ‚Äî start SMC undo-log; –≤—ã—Ö–æ–¥ ‚Äî restore.

smc_guard {
  recurse();
}

DoD: nested guard; imm16 –ø–æ–¥ DI/EI; –æ—Ç—á—ë—Ç -report-smc-anchors –ø–æ–º–µ—á–∞–µ—Ç —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è/–≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è.

‚∏ª

8) smc_bind (—á–∞—Å—Ç–∏—á–Ω–∞—è —Å–ø–µ—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è) ‚Äî ¬´–∑–∞–º—ã–∫–∞–Ω–∏–µ –±–µ–∑ —Ä–∞–Ω—Ç–∞–π–º–∞¬ª

–ü–æ—á–µ–º—É: –æ–¥–∏–Ω –∏–∑ —Å–∞–º—ã—Ö —Å–∏–ª—å–Ω—ã—Ö win‚Äô–æ–≤ Z80: –∏–Ω–≤–∞—Ä–∏–∞–Ω—Ç—ã –∑–∞—à–∏–≤–∞—é—Ç—Å—è, –º–µ–Ω—è–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –ø–µ—Ä–µ–º–µ–Ω–Ω–∞—è —á–∞—Å—Ç—å.
Lowering: –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç—Å—è ¬´–≤–∞—Ä–∏–∞–Ω—Ç¬ª —è–∫–æ—Ä–µ–π —Å –∑–∞—à–∏—Ç—ã–º–∏ –∑–Ω–∞—á–µ–Ω–∏—è–º–∏; –ø—Ä–∏ –≤—ã–∑–æ–≤–µ –ø–∞—Ç—á–∞—Ç—Å—è —Ç–æ–ª—å–∫–æ –Ω–µ–∑–∞—à–∏—Ç—ã–µ.

@abi(smc)
fun plot(x: u8, y: u8, col: u8) -> void { ... }
let plot_white = smc_bind plot(col=7);
plot_white(10, 20);

DoD: –Ω–µ–∏–∑–º–µ–Ω—è–µ–º–æ—Å—Ç—å –∑–∞—à–∏—Ç—ã—Ö; —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å —Å guard; –æ—Ç—á—ë—Ç –æ –∫–æ–ª–∏—á–µ—Å—Ç–≤–µ –ø–∞—Ç—á–µ–π.

‚∏ª

9) –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞/–æ—Ç—á—ë—Ç—ã (–ø—Ä–æ–∑—Ä–∞—á–Ω–æ—Å—Ç—å –º–∞–≥–∏–∏)

–ü–æ—á–µ–º—É: –¥–µ–≤–µ–ª–æ–ø–µ—Ä—ã Z80 —Ü–µ–Ω—è—Ç –≤–∏–¥–∏–º–æ—Å—Ç—å.
–§–ª–∞–≥–∏:
	‚Ä¢	-report-smc-anchors (–∞–¥—Ä–µ—Å–∞ —è–∫–æ—Ä–µ–π, –ø–µ—Ä–≤–∞—è/–ø–æ–≤—Ç–æ—Ä–Ω–∞—è –∑–∞–≥—Ä—É–∑–∫–∞),
	‚Ä¢	-report-abi (–ø–æ—á–µ–º—É –≤—ã–±—Ä–∞–Ω smc/slot/reg),
	‚Ä¢	PATCH-TABLE.json/MEMORY-MAP.json (—á–µ—Ä–Ω–æ–≤–∞—è —Å—Ö–µ–º–∞).

DoD: —Å—Ç–∞–±–∏–ª—å–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç, —Å—Å—ã–ª–∫–∏ –Ω–∞ –∏—Å—Ö–æ–¥–Ω–∏–∫, –±–∞–∑–æ–≤—ã–µ –º–µ—Ç—Ä–∏–∫–∏.

‚∏ª

‚õî –ß—Ç–æ –Ω–µ –±–µ—Ä—ë–º –≤ –ø–µ—Ä–≤—ã–π —ç—à–µ–ª–æ–Ω
	‚Ä¢	–ì–æ—Ä—Ä—É—Ç–∏–Ω—ã / –∫–∞–Ω–∞–ª—ã / —Å—Ç–µ–π—Ç-–º–∞—à–∏–Ω—ã: –º–æ—â–Ω–æ, –Ω–æ —ç—Ç–æ —É–∂–µ ¬´–º–∏–∫—Ä–æ—Ä–∞–Ω—Ç–∞–π–º¬ª –∏ –∑–∞–º–µ—Ç–Ω–∞—è —Å–ª–æ–∂–Ω–æ—Å—Ç—å. –û—Å—Ç–∞–Ω—É—Ç—Å—è –¥–ª—è FuturePath.
	‚Ä¢	–ú–µ—Ç–∞–ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏–µ (Lua/meta fun): –¥–æ–±–∞–≤–∏–º –ø–æ–∑–∂–µ –∫–∞–∫ –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä—É, —Å–µ–π—á–∞—Å –Ω–µ –±–ª–æ–∫–∏—Ä—É–µ—Ç —ç—Ä–≥–æ–Ω–æ–º–∏–∫—É.
	‚Ä¢	–£–∫–∞–∑–∞—Ç–µ–ª–∏ –Ω–∞ —Ñ—É–Ω–∫—Ü–∏–∏ + thunk-—Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å ABI: –ø–æ–ª–µ–∑–Ω–æ, –Ω–æ —Ç—Ä–µ–±—É–µ—Ç –∞–∫–∫—É—Ä–∞—Ç–Ω–æ–π —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏–∏ ‚Äî –ø–µ—Ä–µ–Ω–µ—Å—ë–º –Ω–∞ —Å–ª–µ–¥—É—é—â–∏–π —ç—à–µ–ª–æ–Ω.

‚∏ª

üó∫Ô∏è FuturePath (—Å–≤–æ–¥–Ω—ã–π –ø–ª–∞–Ω)

Phase 0.2 ‚Äî First Echelon (—ç—Ç–æ—Ç —Å–ø–∏—Å–æ–∫)
	‚Ä¢	1‚Äì2 –Ω–µ–¥–µ–ª–∏; —á–∏—Å—Ç—ã–π –∫–æ–º–ø–∏–ª—è—Ç–æ—Ä–Ω—ã–π —Å–∞—Ö–∞—Ä + —É–∂–µ —Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω–Ω–∞—è SMC-–º–æ–¥–µ–ª—å.
	‚Ä¢	KPI: —É–º–µ–Ω—å—à–µ–Ω–∏–µ –∫–æ–¥–∞-¬´—à—É–º–æ–≤¬ª, —Ä–æ—Å—Ç —á–∏—Ç–∞–µ–º–æ—Å—Ç–∏, –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–µ —Ä–µ–≥—Ä–µ—Å—Å–æ–≤ –ø–æ T-states.

Phase 0.3 ‚Äî Tooling & Stabilization
	‚Ä¢	–ê–Ω–Ω–æ—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–π .a80: –ø–æ–º–µ—Ç–∫–∏ —è–∫–æ—Ä–µ–π/–¥–µ—Ñ–µ—Ä–æ–≤/–º–∞—Ç–µ—Ä–∏–∞–ª–∏–∑–∞—Ü–∏–π.
	‚Ä¢	–£–ª—É—á—à–µ–Ω–∏–µ –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏ (-Witer-ref-deopt, -Wanchor-dup-branch).
	‚Ä¢	–ü—Ä–∏–º–µ—Ä—ã/–¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è (mnist_minimal, screen_demo) –ø–µ—Ä–µ–ø–∏—Å–∞–Ω—ã –Ω–∞ –Ω–æ–≤—ã–π —Å–∞—Ö–∞—Ä.

Phase 0.4 ‚Äî Function Pointers & smc_bind 2.0
	‚Ä¢	–ú–∏–Ω–∏-—Å–ø–µ–∫–∞ fun-pointer (u16 addr + –æ–ø—Ü. sig_id).
	‚Ä¢	–ë–µ–∑–æ–ø–∞—Å–Ω—ã–π –≤—ã–∑–æ–≤ –ø–æ–¥ @abi(smc) (–ø–∞—Ç—á —è–∫–æ—Ä–µ–π —Ü–µ–ª–∏) –∏ @abi(slot).
	‚Ä¢	smc_bind –¥–ª—è fun-pointers (—Ö—Ä–∞–Ω–∏—Ç—å –∞–¥—Ä–µ—Å ¬´–≤–∞—Ä–∏–∞–Ω—Ç–∞¬ª —Å –∑–∞—à–∏—Ç—ã–º–∏ —è–∫–æ—Ä—è–º–∏).

Phase 0.5 ‚Äî Metaprogramming (limited)
	‚Ä¢	Lua-—Ö—É–∫–∏: –≥–µ–Ω–µ—Ä–∞—Ü–∏—è –¥–∂–∞–º–ø-—Ç–∞–±–ª–∏—Ü, –æ—Ç—á—ë—Ç–æ–≤, –º–∞—Å—Å–æ–≤—ã—Ö smc_bind –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤.
	‚Ä¢	–ë–µ–∑ –≤–ª–∏—è–Ω–∏—è –Ω–∞ —Ä–∞–Ω—Ç–∞–π–º; —Ç–æ–ª—å–∫–æ build-time.

Phase 0.6 ‚Äî Concurrency Lite
	‚Ä¢	spawn/yield –∫–∞–∫ —á–∏—Å—Ç—ã–π —Å–∞—Ö–∞—Ä –≤ state-machine (–±–µ–∑ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏—è —Å—Ç–µ–∫–∞).
	‚Ä¢	channel[T,N] –∫–∞–∫ –Ω–µ–±–ª–æ–∫–∏—Ä—É—é—â–∏–π –∫–æ–ª—å—Ü–µ–≤–æ–π –±—É—Ñ–µ—Ä (lib + —Å–∞—Ö–∞—Ä).
	‚Ä¢	select –∫–∞–∫ —Å–∏–Ω—Ç–∞–∫—Å–∏—Å –Ω–∞ if try_recv.

Phase 0.7 ‚Äî Banks/ISR Automation
	‚Ä¢	–ê–≤—Ç–æ-using bank[n] –Ω–∞–¥ –ø–∞—Ç—á–∞–º–∏/–¥–æ—Å—Ç—É–ø–∞–º–∏; –ø–µ—Ä-–∫–æ–Ω—Ç–µ–∫—Å—Ç–Ω—ã–µ –∫–æ–ø–∏–∏ –∫–æ–¥–∞ –¥–ª—è ISR.
	‚Ä¢	–ü—Ä–∞–≤–∏–ª–∞ –±–µ–∑–æ–ø–∞—Å–Ω–æ–≥–æ imm16 –ø–æ–¥ –ø—Ä–µ—Ä—ã–≤–∞–Ω–∏—è.

Phase 1.0 ‚Äî Generics/Traits (—Å–ø–µ—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –Ω–∞ –∫–æ–º–ø–∞–π–ª–µ)
	‚Ä¢	–¢–æ–ª—å–∫–æ —Å–ø–µ—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è (–±–µ–∑ RTTI/VM); ¬´–∞–Ω—Ç–∏-–°¬ª —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è.

‚∏ª

üß™ –ú–∏–Ω–∏-–±–µ–Ω—á-–∫–æ–Ω—Ç—Ä–æ–ª—å (–∫ –ø–µ—Ä–≤–æ–º—É —ç—à–µ–ª–æ–Ω—É)
	‚Ä¢	for N..0 –ø—Ä–æ—Ç–∏–≤ —Ä—É—á–Ω–æ–≥–æ DJNZ ‚Äî —Ç–æ–∂–¥–µ—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç—å T-states.
	‚Ä¢	defer ‚Üí –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –ª–∏—à–Ω–∏—Ö –≤—ã–∑–æ–≤–æ–≤/–ø—Ä—ã–∂–∫–æ–≤.
	‚Ä¢	with ‚Üí —Ä–∞–∑–Ω–∏—Ü–∞ –æ—Ç —Ä—É—á–Ω–æ–≥–æ if(A==0) ‚Äî 0 –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–π.
	‚Ä¢	smc_bind ‚Üí —É–º–µ–Ω—å—à–µ–Ω–∏–µ –ø–∞—Ç—á–µ–π –Ω–∞ call-site (x2‚Äìx3 –ø–æ —á–∞—Å—Ç–æ–º—É –∫–µ–π—Å—É).
	‚Ä¢	&i ‚Üí –∫–æ–º–ø–∏–ª—è—Ç–æ—Ä –≤—ã–¥–∞—ë—Ç –≤–∞—Ä–Ω–∏–Ω–≥; –Ω–∞–∫–ª–∞–¥–Ω—ã–µ —Ä–∞—Å—Ö–æ–¥—ã ~~+1‚Äì2 –∏–Ω—Å/–∏—Ç–µ—Ä–∞—Ü–∏—é (–∑–∞–ø–∏—Å—å i_slot).

‚∏ª

üí° –ß—Ç–æ —ç—Ç–æ –¥–∞—Å—Ç —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏—Ü–µ —É–∂–µ –∑–∞–≤—Ç—Ä–∞
	‚Ä¢	–ß–∏—Ç–∞–µ–º—ã–π –∫–æ–¥ —É—Ä–æ–≤–Ω—è Ruby/Crystal/Elixir: –∏–º–µ–Ω–æ–≤–∞–Ω–Ω—ã–µ –∞—Ä–≥—É–º–µ–Ω—Ç—ã, with, match, defer, ¬´–µ—Å—Ç–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ¬ª —Ü–∏–∫–ª—ã.
	‚Ä¢	–°–∫–æ—Ä–æ—Å—Ç—å Z80-–∞—Å–º–∞: DJNZ, –∏–º–º–µ–¥–∏–∞—Ç—ã –≤–Ω—É—Ç—Ä–∏ —Ñ—É–Ω–∫—Ü–∏–π, –Ω–æ–ª—å —Å—Ç–µ–∫–∞.
	‚Ä¢	–ö–æ–Ω—Ç—Ä–æ–ª—å: –æ—Ç—á—ë—Ç—ã –ø–æ–∫–∞–∑—ã–≤–∞—é—Ç, –≥–¥–µ —è–∫–æ—Ä—å, –≥–¥–µ –¥–µ–æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è, –≥–¥–µ ¬´–∑–∞—à–∏—Ç–æ¬ª.

–ï—Å–ª–∏ —Å–æ–≥–ª–∞—Å–Ω–∞ —Å —Å–æ–¥–µ—Ä–∂–∏–º—ã–º ‚Äî –º–æ–≥—É –æ–±–Ω–æ–≤–∏—Ç—å SPEC/ADR: –¥–æ–±–∞–≤–∏—Ç—å —Ä–∞–∑–¥–µ–ª—ã –ø–æ Named Args, Error Tuples + with, DJNZ-–¥–∏–∞–ø–∞–∑–æ–Ω—ã, defer, &i-–º–∞—Ç–µ—Ä–∏–∞–ª–∏–∑–∞—Ü–∏—è, smc_bind, SMC-guard, –∞ —Ç–∞–∫–∂–µ –≤–∫–ª—é—á–∏—Ç—å —Ä–∞–∑–¥–µ–ª ‚ÄúFirst Echelon‚Äù –∏ FuturePath –∫–∞–∫ –æ—Ñ–∏—Ü–∏–∞–ª—å–Ω—ã–π roadmap.