; MinZ generated code
; Generated: 2025-08-16 13:45:14


; Code section
    ORG $8000

; Using hierarchical register allocation (physical → shadow → memory)

; Function: test_simple_method.main
test_simple_method.main:
; IsSMCDefault=true, IsSMCEnabled=true
; Using absolute addressing for locals (SMC style)
    ; Allocate struct Point
    LD HL, -2
    ADD HL, SP
    LD SP, HL
    EX DE, HL
    LD HL, SP
    ; Register 2 already in HL
    ; r3 = 10
    LD A, 10
    ; Register 3 already in A
    ; Store to Point.x
    ; Register 2 already in HL
    PUSH HL
    POP DE
    LD (DE), L
    INC DE
    LD (DE), H
    ; r4 = 20
    LD A, 20
    LD B, A         ; Store to physical register B
    ; Store to Point.y
    ; Register 2 already in HL
    LD DE, 1
    ADD HL, DE
    PUSH HL
    POP DE
    LD (DE), L
    INC DE
    LD (DE), H
    ; store p, r2
    ; Register 2 already in HL
    LD ($F002), HL
    ; r6 = load p
    LD HL, ($F002)
    ; Load field x (offset 0)
    LD E, (HL)
    INC HL
    LD D, (HL)
    EX DE, HL
    ; store x_val, r7
    LD ($F00A), HL
    ; return
    RET

    END main
