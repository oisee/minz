; MinZ Intermediate Representation (MIR)
; Module: main

; Globals:
;   ...examples.test_loop_minimal.items: [3]...examples.test_loop_minimal.Item

Function ...examples.test_loop_minimal.main() -> void
  @smc
  Instructions:
      0: r1 = 10
      1: 70
      2: r3 = 0
      3: 15 ; Load array element (...examples.test_loop_minimal.Item)
      4: 14 ; Store to field value (offset 0)
      5: r5 = 20
      6: 70
      7: r7 = 1
      8: 15 ; Load array element (...examples.test_loop_minimal.Item)
      9: 14 ; Store to field value (offset 0)
     10: r9 = 30
     11: 70
     12: r11 = 2
     13: 15 ; Load array element (...examples.test_loop_minimal.Item)
     14: 14 ; Store to field value (offset 0)
     15: 70
     16: 70 ; Load table base address
     17: 70 ; Load table base for end calculation
     18: 75 ; Calculate table end (+ 3 elements * 1 bytes)
     19: 74 ; Load loop counter
     20: loop_start_1:
     21: 53 ; Check if reached end of table
     22: 3 ; Exit if done
     23: 71 ; Copy element to buffer at $F000
     24: 21 ; Load item.value from buffer at $F000
     25: r19 = 1
     26: r20 = r18 + r19
     27: r21 = load item
     28: 14 ; Store to field value (offset 0)
     29: 72 ; Copy buffer back to element at $F000
     30: 75 ; Advance to next element (+1 bytes)
     31: 73 ; Decrement counter and loop if not zero
     32: loop_end_2:
     33: return

