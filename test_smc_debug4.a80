; MinZ generated code
; Generated: 2025-07-07 21:30:24


; Code section
    ORG $8000


; Function: add
add:
    PUSH IX
    LD IX, SP
    ; Parameter a
    LD L, (IX+4)
    LD H, (IX+5)
    LD (IX-2), L
    LD (IX-1), H
    ; Parameter b
    LD L, (IX+6)
    LD H, (IX+7)
    LD (IX-4), L
    LD (IX-3), H
    ; r3 = load a
    LD L, (IX-6)
    LD H, (IX-5)
    LD (IX-6), L
    LD (IX-5), H
    ; r4 = load b
    LD L, (IX-8)
    LD H, (IX-7)
    LD (IX-8), L
    LD (IX-7), H
    ; r5 = r3 + r4
    LD L, (IX-6)
    LD H, (IX-5)
    PUSH HL
    LD L, (IX-8)
    LD H, (IX-7)
    POP DE
    ADD HL, DE
    LD (IX-10), L
    LD (IX-9), H
    ; return r5
    LD L, (IX-10)
    LD H, (IX-9)
    LD SP, IX
    POP IX
    RET

; Function: main
main:
    PUSH IX
    LD IX, SP
    LD HL, -2
    ADD HL, SP
    LD SP, HL
    ; r2 = 10
    LD A, 10
    LD (IX-6), A
    ; r3 = 20
    LD A, 20
    LD (IX-8), A
    ; r4 = call add
    CALL add
    LD (IX-10), L
    LD (IX-9), H
    ; store , r4
    LD L, (IX-10)
    LD H, (IX-9)
    LD (IX-4), L
    LD (IX-3), H
    ; return
    LD SP, IX
    POP IX
    RET

    END main
